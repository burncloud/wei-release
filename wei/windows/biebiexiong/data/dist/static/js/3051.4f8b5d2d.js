/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2024-03-07 17:07:58
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[3051],{53580:function(t,e,o){o.d(e,{BB:function(){return s},BN:function(){return u},N7:function(){return k},NY:function(){return d},PM:function(){return w},Wx:function(){return l},Xq:function(){return g},Z0:function(){return f},iw:function(){return i},kA:function(){return p},l0:function(){return m},mE:function(){return h},wR:function(){return c},xS:function(){return b},yX:function(){return r},yo:function(){return y}});var n=o(92325),a=o(11555);function r(){return(0,n.Z)({url:"/wwwapi.php?to=sd&modac=tags",method:"get"})}function s(t){return(0,n.Z)({url:"/wwwapi.php?to=postSd",method:"get",params:t})}function i(t){const e={heat:{filter:"heat",orderby:"heats"},hot:{filter:"hot",orderby:""},digest:{filter:"digest",digest:"1"},lastpost:{filter:"lastpost",orderby:"lastpost"}},o={...e[t]};return o}function l(t){const e={...t,filter_form_id:3};return(0,n.Z)({url:"/wwwapi.php?to=postTag",method:"get",params:e})}function u(t){return(0,n.Z)({url:"/wwwapi.php?to=postView&extra=",method:"get",params:t})}function c(t){const e={...t,fid:3};return(0,n.Z)({url:"/wwwapi.php?to=postOfUser",method:"get",params:e})}async function d(t){const{body:{hash:e}}=await(0,a.Gv)();return(0,n.Z)({url:"/wwwapi.php?to=postReply",method:"post",data:{file:"",subject:"",usesig:"1",replysubmit:"yes",formhash:e,tid:t.tid,message:t.message}})}async function p(t){const{body:{hash:e}}=await(0,a.Gv)();return(0,n.Z)({url:"/wwwapi.php?to=postReply",method:"post",data:{subject:"",usesig:"1",replysubmit:"yes",formhash:e,...t}})}async function f(t){const{body:{hash:e}}=await(0,a.Gv)();return t.formhash=e,(0,n.Z)({url:"/wwwapi.php?to=postDel",method:"post",data:t})}async function m(t){const{body:{hash:e}}=await(0,a.Gv)();return(0,n.Z)({url:"/wwwapi.php?to=postFavAdd",method:"get",params:{id:t,formhash:e}})}async function g(t){const{body:{hash:e}}=await(0,a.Gv)();return(0,n.Z)({url:"/wwwapi.php?to=postFavDel",method:"post",data:{favid:t,formhash:e}})}function w(t){const e={...t,thread_forum:"sd"};return(0,n.Z)({url:"/wwwapi.php?to=postFavlist",method:"get",params:e})}async function h(t){const{body:{hash:e}}=await(0,a.Gv)();return(0,n.Z)({url:"/wwwapi.php?to=postLikes",method:"get",params:{tid:t,hash:e}})}async function y(t){const{body:{hash:e}}=await(0,a.Gv)();return(0,n.Z)({url:"/wwwapi.php?to=postReport",method:"post",data:{referer:"",reportsubmit:"true",rtype:"post",url:"",inajax:"1",handlekey:`miscreport${t.rid}`,formhash:e,...t}})}async function b(t){const e={...t};e.tags=e.tags.join(",");const{body:{hash:o}}=await(0,a.Gv)();return(0,n.Z)({url:"/wwwapi.php?to=sd&modac=sharePrepare",method:"post",data:{formhash:o,...e}})}async function k(t){return(0,n.Z)({url:"/wwwapi.php?to=sdpost",method:"post",data:t})}},63877:function(t,e,o){o.d(e,{Nb:function(){return r},jQ:function(){return n},jl:function(){return a}});const n={message:[{required:!0,message:"评论内容必填",trigger:"blur"}]},a={report_select:[{required:!0,message:"请选择举报类型",trigger:"blur"}],message:[{required:!0,message:"举报内容必填",trigger:"blur"},{min:8,max:255,message:"举报内容长度必须在8-255个字符",trigger:"blur"}]},r={images:[{required:!0,message:"发帖需要至少一张图片",trigger:"blur"}],subject:[{required:!0,message:"内容必填",trigger:"blur"}],tags:[{required:!0,message:"至少选择一个标签",trigger:"blur"}]}},63051:function(t,e,o){o.r(e),o.d(e,{default:function(){return V}});var n=o(73481),a=(o(3241),o(62029),o(20129)),r=(o(69840),o(15659)),s=(o(10444),o(57534)),i=(o(92471),o(57018)),l=(o(74367),o(6589),o(73632)),u=(o(74965),o(22040)),c=(o(99426),o(86398)),d=(o(69448),o(27750)),p=o(57122),f=(o(69540),o(10661)),m=(o(35095),o(57658),o(66252)),g=o(2262),w=o(3577),h=o(53580),y=o(63877),b=o(20235),k=o(22201);const v={class:"share-form-container"},_={class:"flex justify-end"},x={class:"lora-draw-card-body"},j={class:"lora-draw-image-group"},U={key:0,class:"flex justify-center"},C={key:1,class:"flex justify-between"},W={key:2,class:"flex justify-between"};var Z={__name:"shareform",setup(t,{expose:e}){const o=(0,k.tv)(),Z=(0,m.f3)("$baseMessage"),S=(0,g.iH)(null),q=(0,g.qj)({form:{images:[],subject:"",tags:[]},dialogFormVisible:!1,tagOptions:[],rules:{...y.Nb},formRef:null,postLoading:!1}),{dialogFormVisible:D,form:V,tagOptions:F,rules:R,formRef:G,postLoading:O}=(0,g.BK)(q);(0,m.wF)((()=>{L()}));const B=(0,m.Fl)((()=>q.form.images.length));async function L(){const{body:t}=await(0,h.yX)();q.tagOptions=t.map((t=>({name:t,checked:!1})))}function N(t){const e=q.form.tags.findIndex((e=>e===t.name));e>=0||(t.checked=!0,q.form.tags.push(t.name))}async function H(t){const e=q.form.tags.findIndex((e=>e===t));if(e>=0){q.form.tags.splice(e,1);const o=q.tagOptions.find((e=>e.name===t));o&&(o.checked=!1)}}async function K(t){q.dialogFormVisible=!0,q.form.images=t}async function Y(){q["formRef"].validate((t=>{t&&z()}))}async function z(){q.postLoading=!0;try{const{body:{data:t}}=await(0,h.xS)(q.form),{body:{tid:e}}=await(0,h.N7)(t);Z("发帖成功","success","vab-hey-message-success"),q.postLoading=!1,o.push((0,b.OO)(e))}catch(t){}finally{q.postLoading=!1}}function E(t){q.form.images.splice(t,1)}function I(){q.form.image=[],q.form.subject="",q.form.tags=[],q.tagOptions.map((t=>t.checked=!1))}function X(t,e){const o=q.form.images,n=t+e;n>B-1||n<0||([o[n],o[t]]=[o[t],o[n]])}return e({showDialog:K}),(t,e)=>{const o=(0,m.up)("vab-icon"),h=f.Q0,y=p.F8,b=d.Z,k=c.gi,Z=u.Dv,L=l.dq,K=a.nH,z=i.EZ,A=s.Ks,M=r.ElButton,P=a.ly,Q=n.d0;return(0,m.wg)(),(0,m.iD)("div",v,[(0,m.Wm)(Q,{modelValue:(0,g.SU)(D),"onUpdate:modelValue":e[2]||(e[2]=t=>(0,g.dq)(D)?D.value=t:null),title:"分享作品",onClose:I},{default:(0,m.w5)((()=>[(0,m._)("div",_,[(0,m.Wm)(h,{content:"可拖动图片改变顺序",placement:"top"},{default:(0,m.w5)((()=>[(0,m.Wm)(o,{icon:"question-line"})])),_:1})]),(0,m.Wm)(L,{ref_key:"imagesBoxRef",ref:S,gutter:16,span:"24",justify:"center"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)((0,g.SU)(V).images,((t,e)=>((0,m.wg)(),(0,m.j4)(Z,{key:t,lg:4,md:4,sm:4,xl:3,xs:12},{default:(0,m.w5)((()=>[(0,m.Wm)(b,{"body-style":{padding:"0px"},shadow:"hover",class:"image-card"},{default:(0,m.w5)((()=>[(0,m._)("div",x,[(0,m._)("div",j,[(0,m._)("div",{class:(0,w.C_)(["lora-draw-image",{"cursor-pointer":(0,g.SU)(B)>1}])},[(0,m.Wm)(y,{src:t},null,8,["src"]),(0,g.SU)(B)>1?((0,m.wg)(),(0,m.j4)(o,{key:0,icon:"close-circle-line",style:{color:"var(--el-color-danger)"},class:"action",onClick:t=>E(e)},null,8,["onClick"])):(0,m.kq)("",!0)],2)])])])),_:2},1024),0===e?((0,m.wg)(),(0,m.iD)("div",U,[(0,m.Wm)(k,{type:"primary"},{default:(0,m.w5)((()=>[(0,m.Uk)("封面"+(0,w.zw)((0,g.SU)(q).hiddenCoverText),1)])),_:1})])):e===(0,g.SU)(B)-1?((0,m.wg)(),(0,m.iD)("div",C,[(0,m.Wm)(o,{icon:"arrow-left-circle-line",class:"cursor-pointer",onClick:t=>X(e,-1)},null,8,["onClick"])])):((0,m.wg)(),(0,m.iD)("div",W,[(0,m.Wm)(o,{icon:"arrow-left-circle-line",class:"cursor-pointer",onClick:t=>X(e,-1)},null,8,["onClick"]),(0,m.Wm)(o,{icon:"arrow-right-circle-line",class:"cursor-pointer",onClick:t=>X(e,1)},null,8,["onClick"])]))])),_:2},1024)))),128))])),_:1},512),(0,m.Wm)(P,{ref_key:"formRef",ref:G,model:(0,g.SU)(V),rules:(0,g.SU)(R),"label-width":"100px"},{default:(0,m.w5)((()=>[(0,m.Wm)(K,{prop:"images"}),(0,m.Wm)(K,{label:"标题",prop:"subject"},{default:(0,m.w5)((()=>[(0,m.Wm)(z,{modelValue:(0,g.SU)(V).subject,"onUpdate:modelValue":e[0]||(e[0]=t=>(0,g.SU)(V).subject=t),placeholder:"请发挥您的创意，大笔挥上贴近您作品的创意标题"},null,8,["modelValue"])])),_:1}),(0,m.Wm)(K,{label:"使用标签",prop:"tags"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)((0,g.SU)(V).tags,(t=>((0,m.wg)(),(0,m.j4)(A,{key:t,closable:"","disable-transitions":!1,style:{"margin-right":"10px","margin-bottom":"10px","margin-left":"0"},onClose:e=>H(t)},{default:(0,m.w5)((()=>[(0,m.Uk)((0,w.zw)(t),1)])),_:2},1032,["onClose"])))),128))])),_:1}),(0,m.Wm)(K,{label:"可选标签"},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)((0,g.SU)(F),(t=>((0,m.wg)(),(0,m.j4)(A,{key:t.name,type:t.checked?"info":"","disable-transitions":!1,style:{"margin-right":"10px","margin-bottom":"10px","margin-left":"0"},class:(0,w.C_)({"cursor-pointer":!t.checked}),onClick:e=>N(t)},{default:(0,m.w5)((()=>[(0,m.Uk)((0,w.zw)(t.name),1)])),_:2},1032,["type","class","onClick"])))),128))])),_:1}),(0,m.Wm)(K,{label:""},{default:(0,m.w5)((()=>[(0,m.Wm)(M,{loading:(0,g.SU)(O),type:"primary",onClick:Y},{default:(0,m.w5)((()=>[(0,m.Uk)(" 发布，欣赏下我的杰作吧 ")])),_:1},8,["loading"]),(0,m.Wm)(M,{onClick:e[1]||(e[1]=t=>D.value=!1)},{default:(0,m.w5)((()=>[(0,m.Uk)(" 先不分享，缓缓 ")])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}};function S(t){t.__source="src/views/stablediffusion/components/shareform.vue"}var q=o(83744);"function"===typeof S&&S(Z);const D=(0,q.Z)(Z,[["__scopeId","data-v-af005118"]]);var V=D}}]);