/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2024-03-07 17:07:58
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[8540],{20681:function(e,t,o){o.d(t,{Z:function(){return n}});var a=o(95965);function n(){const{startIntervalTimer:e,stopIntervalTimer:t}=(0,a.Z)();let o,n,l={};function r(a,n,r,s,i,d){const u=a.filter((e=>e[r].showProcess));l={},t(o),0!==u.length&&(o=e((async()=>{const e=u.map((e=>e[n])),{body:{list:t}}=await i(e);let o=!1;for(const a in t){const{stop:e,progress_num:i,progress_text:d}=t[a],u=s.value.find((e=>e[n]===a));u[r].progress_num||(u[r].progress_num=0);const c=parseInt(i);c>u[r].progress_num&&(u[r].progress_num=c,u[r].progress_text=d,l[a]={progress_num:c,progress_text:d}),e&&(o=!0)}o&&d()})))}function s(o,a,r,s,i){const d=o.filter((e=>e[r].time_flash_list));t(n),0!==d.length&&(n=e((async()=>{const{body:e}=await i();for(const t in l){const o=l[t],n=e.find((e=>e[a]===t));n&&Object.assign(n[r],o)}s.value=e;const o=e.filter((e=>e[r].time_flash_list));o.length<=0&&t(n)}),5e3))}function i(){t(o),t(n)}return{startLoadProgress:r,startReloadList:s,stopTimer:i}}},95965:function(e,t,o){o.d(t,{Z:function(){return l}});var a=o(23279),n=o.n(a);function l(){function e(e,t=3e3){return setInterval((()=>{e()}),t)}function t(e){e&&clearInterval(e)}function o(e,t=1e4){return setTimeout((()=>{e()}),t)}function a(e,t=3e3){n()((()=>{e()}),t)()}return{startIntervalTimer:e,stopIntervalTimer:t,startTimeoutTimer:o,startDebounce:a}}},88540:function(e,t,o){o.r(t),o.d(t,{default:function(){return h}});var a=o(73481),n=(o(3241),o(62029),o(20129)),l=(o(69840),o(15659)),r=(o(10444),o(10661)),s=(o(35095),o(47820)),i=(o(50986),o(61715),o(6589),o(57018)),d=(o(74367),o(66252)),u=o(2262),c=o(71726),m=o(85026),_=o(96607),p=o(20681),f=o(95965),y={__name:"download_model_dialog",setup(e,{expose:t}){const{startTimeoutTimer:o}=(0,f.Z)(),{startLoadProgress:y,startReloadList:w,stopTimer:v}=(0,p.Z)(),g=(0,d.f3)("$pub"),h=(0,d.f3)("$baseMessage"),k=(0,u.iH)(!1),b=(0,u.iH)({...m.$j}),U=(0,u.iH)(),W=()=>({container_id:"",create_from_where:"extra_path",model_thread_id:"0",persion_input_model_src:"",model_type:""}),C=(0,u.iH)({...W()});function S(e){k.value=!0,C.value.container_id=e,j(),V(e)}function I(){C.value={...W()},k.value=!1,x.value=[],U.value.resetFields(),v()}function T(){o((()=>{V(C.value.container_id)}))}const H=(0,u.iH)([]);async function j(){const{body:e}=await(0,c.oh)();H.value=e}const x=(0,u.iH)([]);async function V(e){const{body:t}=await(0,c.C0)(e);x.value=t,y(t,"model_id","model_operation_array",x,c.e$,(()=>{V(e)})),w(t,"model_id","model_operation_array",x,(()=>(0,c.C0)(e)))}async function Z(){await U.value.validate((async(e,t)=>{if(!e)return!1;const o=await(0,c._S)(C.value);h(o.msg,"success","vab-hey-message-success");const a=C.value.container_id;U.value.resetFields(),C.value.container_id=a,k.value=!1,g("reload-my-docker-list")}))}return t({showDialog:S}),(e,t)=>{const o=i.EZ,c=n.nH,m=s.BT,p=s.km,f=(0,d.up)("vab-icon"),y=r.Q0,w=l.ElButton,v=n.ly,g=a.d0;return(0,d.wg)(),(0,d.j4)(g,{modelValue:(0,u.SU)(k),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,u.dq)(k)?k.value=e:null),title:"下载模型",width:"80%",onClose:I},{default:(0,d.w5)((()=>[(0,d.Wm)(v,{ref_key:"formRef",ref:U,"label-width":"auto",model:(0,u.SU)(C),rules:(0,u.SU)(b)},{default:(0,d.w5)((()=>[(0,d.Wm)(c,{label:"模型地址",prop:"persion_input_model_src"},{default:(0,d.w5)((()=>[(0,d.Wm)(o,{modelValue:(0,u.SU)(C).persion_input_model_src,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,u.SU)(C).persion_input_model_src=e),placeholder:"模型地址(模型下载完成后，要点击“应用”才可以添加在容器里面)"},null,8,["modelValue"])])),_:1}),(0,d.Wm)(c,{label:"模型分类",prop:"model_type"},{default:(0,d.w5)((()=>[(0,d.Wm)(p,{modelValue:(0,u.SU)(C).model_type,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,u.SU)(C).model_type=e),filterable:"",placeholder:"选择模型保存到的分类",class:"contianer-name-helf"},{default:(0,d.w5)((()=>[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)((0,u.SU)(H),(e=>((0,d.wg)(),(0,d.j4)(m,{key:e.type_key,label:e.name,value:e.type_key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,d.Wm)(y,{effect:"dark",content:"外部下载的模型，请选择模型的分类，不选择时默认保存在模型的other路径下",placement:"top",class:"mx-1","raw-content":""},{default:(0,d.w5)((()=>[(0,d.Wm)(f,{icon:"question-line",class:"cursor-pointer"})])),_:1})])),_:1}),(0,d.Wm)(c,null,{label:(0,d.w5)((()=>[])),default:(0,d.w5)((()=>[(0,d.Wm)(w,{type:"primary",onClick:Z},{default:(0,d.w5)((()=>[(0,d.Uk)(" 下载 ")])),_:1}),(0,d.Wm)(w,{onClick:I},{default:(0,d.w5)((()=>[(0,d.Uk)("取消")])),_:1})])),_:1})])),_:1},8,["model","rules"]),(0,d.Wm)(_["default"],{list:(0,u.SU)(x),"container-id":(0,u.SU)(C).container_id,onReload:T},null,8,["list","container-id"])])),_:1},8,["modelValue"])}}};function w(e){e.__source="src/views/gpumarket/myhosts/components/download_model_dialog.vue"}var v=o(83744);"function"===typeof w&&w(y);const g=(0,v.Z)(y,[["__scopeId","data-v-3c047cf6"]]);var h=g},96607:function(e,t,o){o.r(t),o.d(t,{default:function(){return b}});var a=o(3837),n=(o(3241),o(81010),o(50591)),l=(o(89035),o(15659)),r=(o(10444),o(32018)),s=(o(46160),o(10661)),i=(o(35095),o(50363),o(66252)),d=o(2262),u=o(3577),c=o(48123),m=o(96486),_=o(71726);const p=e=>((0,i.dD)("data-v-63da1196"),e=e(),(0,i.Cn)(),e),f=p((()=>(0,i._)("h3",null,"模型列表",-1))),y={class:"el-progress-action"},w=p((()=>(0,i._)("div",null," 没发现本机有容器，请到容器市场上收藏心仪的容器，然后就能在这里下载，并应用了 ",-1)));var v={__name:"model_list",props:{list:{type:Array,default:()=>[]},containerId:{type:[String,Number],default:0}},emits:["reload"],setup(e,{emit:t}){const o=e,p=(0,i.f3)("$baseMessage"),v=(0,i.Fl)((()=>o.list.map((e=>(e.format_model_file_name=(0,m.truncate)(e.model_file_name,{length:45,separator:"..."}),e)))));(0,d.iH)([]);async function g(e){if(!e)return void p("无法下载此模型","error","vab-hey-message-error");const a={container_id:o.containerId,create_from_where:"model_list",model_thread_id:e,persion_input_model_src:"",model_type:""},n=await(0,_._S)(a);p(n.msg,"success","vab-hey-message-success"),t("reload")}async function h(e){const a={container_id:o.containerId,host_model_id:e},n=await(0,_.LN)(a);p(n.msg,"success","vab-hey-message-success"),t("reload")}async function k(e){await(0,_.S1)(e),p("删除模型成功","success","vab-hey-message-success"),t("reload")}async function b(e){await(0,_.Pb)(e),p("取消收藏成功","success","vab-hey-message-success"),t("reload")}return(e,t)=>{const o=a.$Y,m=s.Q0,_=r.Xh,p=l.ElButton,U=n.i1,W=a.eI;return(0,i.wg)(),(0,i.iD)("div",null,[f,(0,i.Wm)(W,{data:(0,d.SU)(v),class:"model-list"},{empty:(0,i.w5)((()=>[w])),default:(0,i.w5)((()=>[(0,i.Wm)(o,{label:"分类",prop:"model_type_str",sortable:""}),(0,i.Wm)(o,{label:"容器文件名",prop:"model_file_name"},{default:(0,i.w5)((({row:e})=>[(0,i.Wm)(m,{placement:"top",content:e.model_file_name},{default:(0,i.w5)((()=>[(0,i.Uk)((0,u.zw)(e.format_model_file_name),1)])),_:2},1032,["content"]),(0,i.Wm)((0,d.SU)(c["default"]),{text:e.model_file_name},null,8,["text"])])),_:1}),(0,i.Wm)(o,{label:"状态",prop:"model_status_str",sortable:""}),(0,i.Wm)(o,{label:"位置",prop:"model_where_str",sortable:""}),(0,i.Wm)(o,{label:"操作",prop:"truedata"},{default:(0,i.w5)((({row:e})=>[(0,i._)("div",y,[e.model_operation_array.showProcess?((0,i.wg)(),(0,i.j4)(_,{key:0,"text-inside":!0,"stroke-width":20,percentage:e.model_operation_array.progress_num,striped:"",size:"small"},null,8,["percentage"])):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[e.model_operation_array.showPullButtun?((0,i.wg)(),(0,i.j4)(p,{key:0,type:"primary",size:"small",onClick:t=>g(e.model_forum_id)},{default:(0,i.w5)((()=>[(0,i.Uk)(" 下载 ")])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.model_operation_array.canApply?((0,i.wg)(),(0,i.j4)(p,{key:1,type:"primary",size:"small",onClick:t=>h(e.model_id)},{default:(0,i.w5)((()=>[(0,i.Uk)(" 应用 ")])),_:2},1032,["onClick"])):(0,i.kq)("",!0)],64)),e.model_operation_array.delete?((0,i.wg)(),(0,i.j4)(U,{key:2,title:"确定删除此模型吗？",onConfirm:t=>k(e.model_id)},{reference:(0,i.w5)((()=>[(0,i.Wm)(p,{type:"danger",size:"small"},{default:(0,i.w5)((()=>[(0,i.Uk)("删除")])),_:1})])),_:2},1032,["onConfirm"])):(0,i.kq)("",!0),e.model_operation_array.delete_fav&&e.model_favid?((0,i.wg)(),(0,i.j4)(U,{key:3,title:"确定取消收藏此镜像？",onConfirm:t=>b(e.model_favid)},{reference:(0,i.w5)((()=>[(0,i.Wm)(p,{type:"warning",size:"small"},{default:(0,i.w5)((()=>[(0,i.Uk)("取消收藏")])),_:1})])),_:2},1032,["onConfirm"])):(0,i.kq)("",!0)])])),_:1})])),_:1},8,["data"])])}}};function g(e){e.__source="src/views/gpumarket/myhosts/components/model_list.vue"}var h=o(83744);"function"===typeof g&&g(v);const k=(0,h.Z)(v,[["__scopeId","data-v-63da1196"]]);var b=k}}]);