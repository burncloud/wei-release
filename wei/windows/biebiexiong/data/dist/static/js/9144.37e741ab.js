/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2024-03-07 17:07:58
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[9144],{23471:function(e,t,n){n.d(t,{$u:function(){return X},AX:function(){return Z},BX:function(){return W},Bs:function(){return C},ET:function(){return S},Ep:function(){return i},IF:function(){return I},IX:function(){return h},KD:function(){return M},LN:function(){return F},MU:function(){return f},Nq:function(){return Y},Pb:function(){return j},QC:function(){return x},RS:function(){return q},SI:function(){return D},Sm:function(){return w},U$:function(){return V},Vf:function(){return v},Wz:function(){return d},Xc:function(){return b},Zr:function(){return r},Zt:function(){return Q},ak:function(){return B},an:function(){return m},c1:function(){return c},co:function(){return g},cu:function(){return H},dd:function(){return u},e$:function(){return z},hX:function(){return p},m9:function(){return U},mL:function(){return l},oh:function(){return $},sw:function(){return y},t4:function(){return k},vQ:function(){return T},wW:function(){return E},z4:function(){return _},zB:function(){return G},zw:function(){return s}});var a=n(92325),o=n(11555);function r(e,t){return(0,a.Z)({url:"/wwwapi.php?to=suanli_device",method:"post",params:e,data:t})}function i(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_device&modac=detail",method:"get",params:{client_id:e}})}function u(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_device&modac=guanji",method:"post",data:e})}function d(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_device&modac=advance_setting",method:"post",data:e})}function c(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_device&modac=uninstall",method:"post",data:{client_id:e}})}function l(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_device&modac=reboot",method:"post",data:e})}function s(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_device&modac=delete_device",method:"get",params:{client_id:e}})}function m(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_device&modac=shutdown",method:"post",data:{client_id:e}})}function p(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_device&modac=one_click",method:"post",data:{client_id:e}})}function _(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_device&modac=rentsetting_form",method:"get",params:{client_id:e}})}function w(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_device&modac=rentsetting",method:"post",data:e})}function h(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_market&modac=renew_form",method:"get",params:e})}function f(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_market&modac=renew_done",method:"post",data:e})}function g(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_image&modac=device_image",method:"get",params:{client_id:e}})}function v(e,t){return(0,a.Z)({url:"/wwwapi.php?to=suanli_image&modac=delete_image",method:"post",data:{client_id:e,image_id:t}})}function Z(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_container&modac=create_container_form",method:"post",data:e})}function U(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_container&modac=create_container",method:"post",data:e})}function k(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_image&modac=pull_image",method:"post",data:e})}function y(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_image&modac=get_pull_progres",method:"post",data:{image_id:e}})}async function b(e){const{body:{hash:t}}=await(0,o.Gv)();return(0,a.Z)({url:"/wwwapi.php?to=postFavDel",method:"post",data:{favid:e,formhash:t}})}function q(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_container&modac=device_container",method:"get",params:{client_id:e}})}function S(e,t){return(0,a.Z)({url:"/wwwapi.php?to=suanli_container&modac=container_restart",method:"post",data:{client_id:e,container_id:t}})}function V(e,t){return(0,a.Z)({url:"/wwwapi.php?to=suanli_container&modac=container_stop",method:"post",data:{client_id:e,container_id:t}})}function W(e,t){return(0,a.Z)({url:"/wwwapi.php?to=suanli_container&modac=delete_container",method:"post",data:{client_id:e,container_id:t}})}function H(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_container&modac=get_create_progres",method:"post",data:{container_id:e}})}function D(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_model&modac=device_model",method:"get",params:{client_id:e}})}function $(){return(0,a.Z)({url:"/wwwapi.php?to=suanli_model&modac=download_form",method:"post"})}function x(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_model&modac=download_model",method:"post",data:e})}function C(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_model&modac=model_apply_form",method:"get",params:{client_id:e}})}function F(e,t){return(0,a.Z)({url:"/wwwapi.php?to=suanli_model&modac=model_apply",method:"post",params:e,data:t})}function X(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_model&modac=model_delete",method:"get",params:{host_model_id:e}})}function z(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_model&modac=get_download_progres",method:"get",data:{model_id:e}})}async function j(e){const{body:{hash:t}}=await(0,o.Gv)();return(0,a.Z)({url:"/wwwapi.php?to=postFavDel",method:"post",data:{favid:e,formhash:t}})}function B(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_dataset&modac=device_model",method:"get",params:{client_id:e}})}function E(){return(0,a.Z)({url:"/wwwapi.php?to=suanli_dataset&modac=download_form",method:"post"})}function G(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_dataset&modac=download_model",method:"post",data:e})}function I(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_dataset&modac=model_apply_form",method:"get",params:{client_id:e}})}function M(e,t){return(0,a.Z)({url:"/wwwapi.php?to=suanli_dataset&modac=model_apply",method:"post",params:e,data:t})}function Q(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_dataset&modac=model_delete",method:"get",params:{host_model_id:e}})}function T(e){return(0,a.Z)({url:"/wwwapi.php?to=suanli_dataset&modac=get_download_progres",method:"get",data:{model_id:e}})}async function Y(e){const{body:{hash:t}}=await(0,o.Gv)();return(0,a.Z)({url:"/wwwapi.php?to=postFavDel",method:"post",data:{favid:e,formhash:t}})}},85026:function(e,t,n){n.d(t,{$j:function(){return u},MH:function(){return i},U$:function(){return l},Y2:function(){return a},bT:function(){return r},f_:function(){return c},mw:function(){return o},rM:function(){return s},wH:function(){return d}});const a={agree:[{validator(e,t,n){return t},message:"请同意挂机协议",trigger:"change"}]},o=e=>({host_for_rent:[{required:!0,message:"请选择是否放租",trigger:"change"}],host_rent_method:[{required:!0,message:"请选择出租方式",trigger:"change"}],host_price_right:[{required:!0,message:"请选择定价规则",trigger:"change"}],host_price:[{validator(t,n,a){return e.value.host_price_right<=0||(e.value.host_daly_fee_w>0||e.value.host_week_fee_w>0||e.value.host_month_fee_w>0)},message:"请至少填写一项整机出租价格",trigger:"change"}],container_price:[{validator(t,n,a){return e.value.host_price_right<=0||(e.value.host_hour_fee>0||e.value.host_daly_fee>0||e.value.host_week_fee>0||e.value.host_month_fee>0)},message:"请至少填写一项容器出租价格",trigger:"change"}],host_online_time:[{required:!0,message:"请填写上架时间",trigger:"change"}],host_off_time:[{required:!0,message:"请填写下架时间",trigger:"change"}],agree:[{validator(e,t,n){return t},message:"请同意挂机协议",trigger:"change"}]}),r={container_name:[{required:!0,message:"容器名称必填",trigger:"change"}],persion_input_image_src:[{required:!0,message:"镜像地址必填",trigger:"change"}]},i={persion_input_image_src:[{required:!0,message:"镜像地址必填",trigger:"change"}]},u={persion_input_model_src:[{required:!0,message:"模型地址必填",trigger:"change"}],model_type:[{required:!0,message:"模型类型必选",trigger:"change"}]},d={container_id:[{required:!0,message:"应用容器必选",trigger:"change"}],host_model_id:[{required:!0,message:"模型不能为空",trigger:"change"}]},c={persion_input_model_src:[{required:!0,message:"数据集地址必填",trigger:"change"}],model_type:[{required:!0,message:"数据集类型必选",trigger:"change"}]},l={container_id:[{required:!0,message:"应用容器必选",trigger:"change"}],host_model_id:[{required:!0,message:"数据集不能为空",trigger:"change"}]},s={renew_time:[{required:!0,message:"请至少选择一项续费操作",trigger:"change"}]}},99144:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var a=n(15659),o=(n(3241),n(10444),n(20129)),r=(n(69840),n(10661)),i=(n(35095),n(63715)),u=(n(76252),n(72319),n(6589),n(57018)),d=(n(74367),n(66252)),c=n(2262),l=n(86136),s=n(23471),m=n(85026);const p={class:"comprehensive-form-container"};var _={__name:"create_container_dialog",setup(e,{expose:t}){const n=(0,d.f3)("$baseMessage"),_=(0,d.f3)("$pub"),w=(0,c.iH)(!1),h=(0,c.iH)(),f=()=>({client_id:"",create_from_where:"image_list",device_image_id:0,persion_input_image_src:"",container_name:"",container_ports:"",container_paths:"",host_gpu_select:[]}),g=(0,c.iH)([]),v=(0,c.iH)({...f()}),Z=(0,c.iH)({...m.bT}),U=(0,d.Fl)((()=>0==v.value.device_image_id)),k=(0,c.iH)(!1);function y(e,t=0,n=0){q(e,t),w.value=!0,v.value={...f(),client_id:e,create_from_where:t>0?"image_list":"extra_path",device_image_id:t,persion_input_image_src:""},k.value=!(n>0)}function b(){w.value=!1,h.value.resetFields()}async function q(e,t){let n;n=t>0?{client_id:e,create_from_where:"image_list",device_image_id:t}:{client_id:e,create_from_where:"extra_path",device_image_id:0};const{body:a}=await(0,s.AX)(n);g.value=a.host_gpu_digital_ids}async function S(){await h.value.validate((async(e,t)=>{if(!e)return!1;await(0,s.m9)(v.value),w.value=!1,n("拉取镜像成功","success","vab-hey-message-success"),_("active-device-tab",{name:"docker-list",callback:()=>{_("reload-docker-list")}})}))}return t({showDialog:y}),(e,t)=>{const n=u.EZ,s=o.nH,m=i.lm,_=i.z5,f=(0,d.up)("vab-icon"),y=r.Q0,q=o.ly,V=a.ElButton;return(0,d.wg)(),(0,d.iD)("div",p,[(0,d.Wm)((0,c.SU)(l["default"]),{modelValue:(0,c.SU)(w),"onUpdate:modelValue":t[5]||(t[5]=e=>(0,c.dq)(w)?w.value=e:null),title:"创建容器",width:"600px",onClose:b},{footer:(0,d.w5)((()=>[(0,d.Wm)(V,{onClick:b},{default:(0,d.w5)((()=>[(0,d.Uk)("取 消")])),_:1}),(0,d.Wm)(V,{type:"primary",onClick:S},{default:(0,d.w5)((()=>[(0,d.Uk)(" 确 定 ")])),_:1})])),default:(0,d.w5)((()=>[(0,d.Wm)(q,{ref_key:"formRef",ref:h,class:"demo-form",model:(0,c.SU)(v),rules:(0,c.SU)(Z),"label-width":"auto"},{default:(0,d.w5)((()=>[(0,d.Wm)(s,{label:"容器名称",prop:"container_name"},{default:(0,d.w5)((()=>[(0,d.Wm)(n,{modelValue:(0,c.SU)(v).container_name,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,c.SU)(v).container_name=e),placeholder:"创建完成后好在对应设备的“我的容器”中找它",class:"contianer-name"},null,8,["modelValue"])])),_:1}),(0,d.Wm)(s,{label:"GPU编号"},{default:(0,d.w5)((()=>[(0,d.Wm)(_,{modelValue:(0,c.SU)(v).host_gpu_select,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,c.SU)(v).host_gpu_select=e)},{default:(0,d.w5)((()=>[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)((0,c.SU)(g),(e=>((0,d.wg)(),(0,d.j4)(m,{key:e.gpu_digital_id,label:e.gpu_digital_id},null,8,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,c.SU)(U)?((0,d.wg)(),(0,d.j4)(s,{key:0,label:"设定镜像",prop:"persion_input_image_src"},{default:(0,d.w5)((()=>[(0,d.Wm)(n,{modelValue:(0,c.SU)(v).persion_input_image_src,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,c.SU)(v).persion_input_image_src=e),placeholder:"镜像不在本地和镜像市场收藏夹，手动输入镜像地址",class:"contianer-name"},null,8,["modelValue"])])),_:1})):(0,d.kq)("",!0),(0,c.SU)(k)?((0,d.wg)(),(0,d.iD)(d.HY,{key:1},[(0,d.Wm)(s,{label:"映射端口"},{default:(0,d.w5)((()=>[(0,d.Wm)(n,{modelValue:(0,c.SU)(v).container_ports,"onUpdate:modelValue":t[3]||(t[3]=e=>(0,c.SU)(v).container_ports=e),placeholder:"例如：22|8888|80|3306，多个用英文“|”隔开",class:"contianer-name-helf"},null,8,["modelValue"]),(0,d.Wm)(y,{effect:"dark",content:"仅需填写容器内要穿出的端口，最多4个，或者不填",placement:"top",class:"mx-1","raw-content":""},{default:(0,d.w5)((()=>[(0,d.Wm)(f,{icon:"question-line",class:"cursor-pointer"})])),_:1})])),_:1}),(0,d.Wm)(s,{label:"映射路径"},{default:(0,d.w5)((()=>[(0,d.Wm)(n,{modelValue:(0,c.SU)(v).container_paths,"onUpdate:modelValue":t[4]||(t[4]=e=>(0,c.SU)(v).container_paths=e),placeholder:"例如：/root/sd/model:/core/model|/root/data:/home/docker/data，多个路径用英文“|”隔开",class:"contianer-name-helf"},null,8,["modelValue"]),(0,d.Wm)(y,{effect:"dark",content:"系统默认挂载了容器内/root/model,/root/dataset,/root/data 共3个目录。<br>需要额外目录的，请补充。格式：/root/sd/model:/core/model|/root/data:/home/docker/data。<br>可不填",placement:"top",class:"mx-1","raw-content":""},{default:(0,d.w5)((()=>[(0,d.Wm)(f,{icon:"question-line",class:"cursor-pointer"})])),_:1})])),_:1})],64)):(0,d.kq)("",!0)])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}};function w(e){e.__source="src/views/gpumarket/mydevice/components/create_container_dialog.vue"}var h=n(83744);"function"===typeof w&&w(_);const f=(0,h.Z)(_,[["__scopeId","data-v-4a7bc652"]]);var g=f}}]);