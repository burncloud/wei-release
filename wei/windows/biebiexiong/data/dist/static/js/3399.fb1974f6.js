/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2024-03-07 17:07:58
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[3399,6682],{20681:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(95965);function a(){const{startIntervalTimer:e,stopIntervalTimer:t}=(0,n.Z)();let r,a,o={};function s(n,a,s,i,l,u){const c=n.filter((e=>e[s].showProcess));o={},t(r),0!==c.length&&(r=e((async()=>{const e=c.map((e=>e[a])),{body:{list:t}}=await l(e);let r=!1;for(const n in t){const{stop:e,progress_num:l,progress_text:u}=t[n],c=i.value.find((e=>e[a]===n));c[s].progress_num||(c[s].progress_num=0);const _=parseInt(l);_>c[s].progress_num&&(c[s].progress_num=_,c[s].progress_text=u,o[n]={progress_num:_,progress_text:u}),e&&(r=!0)}r&&u()})))}function i(r,n,s,i,l){const u=r.filter((e=>e[s].time_flash_list));t(a),0!==u.length&&(a=e((async()=>{const{body:e}=await l();for(const t in o){const r=o[t],a=e.find((e=>e[n]===t));a&&Object.assign(a[s],r)}i.value=e;const r=e.filter((e=>e[s].time_flash_list));r.length<=0&&t(a)}),5e3))}function l(){t(r),t(a)}return{startLoadProgress:s,startReloadList:i,stopTimer:l}}},95965:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(23279),a=r.n(n);function o(){function e(e,t=3e3){return setInterval((()=>{e()}),t)}function t(e){e&&clearInterval(e)}function r(e,t=1e4){return setTimeout((()=>{e()}),t)}function n(e,t=3e3){a()((()=>{e()}),t)()}return{startIntervalTimer:e,stopIntervalTimer:t,startTimeoutTimer:r,startDebounce:n}}},85026:function(e,t,r){r.d(t,{$j:function(){return i},MH:function(){return s},U$:function(){return c},Y2:function(){return n},bT:function(){return o},f_:function(){return u},mw:function(){return a},rM:function(){return _},wH:function(){return l}});const n={agree:[{validator(e,t,r){return t},message:"请同意挂机协议",trigger:"change"}]},a=e=>({host_for_rent:[{required:!0,message:"请选择是否放租",trigger:"change"}],host_rent_method:[{required:!0,message:"请选择出租方式",trigger:"change"}],host_price_right:[{required:!0,message:"请选择定价规则",trigger:"change"}],host_price:[{validator(t,r,n){return e.value.host_price_right<=0||(e.value.host_daly_fee_w>0||e.value.host_week_fee_w>0||e.value.host_month_fee_w>0)},message:"请至少填写一项整机出租价格",trigger:"change"}],container_price:[{validator(t,r,n){return e.value.host_price_right<=0||(e.value.host_hour_fee>0||e.value.host_daly_fee>0||e.value.host_week_fee>0||e.value.host_month_fee>0)},message:"请至少填写一项容器出租价格",trigger:"change"}],host_online_time:[{required:!0,message:"请填写上架时间",trigger:"change"}],host_off_time:[{required:!0,message:"请填写下架时间",trigger:"change"}],agree:[{validator(e,t,r){return t},message:"请同意挂机协议",trigger:"change"}]}),o={container_name:[{required:!0,message:"容器名称必填",trigger:"change"}],persion_input_image_src:[{required:!0,message:"镜像地址必填",trigger:"change"}]},s={persion_input_image_src:[{required:!0,message:"镜像地址必填",trigger:"change"}]},i={persion_input_model_src:[{required:!0,message:"模型地址必填",trigger:"change"}],model_type:[{required:!0,message:"模型类型必选",trigger:"change"}]},l={container_id:[{required:!0,message:"应用容器必选",trigger:"change"}],host_model_id:[{required:!0,message:"模型不能为空",trigger:"change"}]},u={persion_input_model_src:[{required:!0,message:"数据集地址必填",trigger:"change"}],model_type:[{required:!0,message:"数据集类型必选",trigger:"change"}]},c={container_id:[{required:!0,message:"应用容器必选",trigger:"change"}],host_model_id:[{required:!0,message:"数据集不能为空",trigger:"change"}]},_={renew_time:[{required:!0,message:"请至少选择一项续费操作",trigger:"change"}]}},70076:function(e,t,r){r.r(t),r.d(t,{default:function(){return y}});var n=r(73481),a=(r(3241),r(62029),r(20129)),o=(r(69840),r(15659)),s=(r(10444),r(10661)),i=(r(35095),r(47820)),l=(r(50986),r(61715),r(6589),r(57018)),u=(r(74367),r(66252)),c=r(2262),_=r(71726),d=r(85026),g=r(68367),m=r(20681),f=r(95965),p={__name:"download_dataset_dialog",setup(e,{expose:t}){const{startTimeoutTimer:r}=(0,f.Z)(),{startLoadProgress:p,startReloadList:h,stopTimer:v}=(0,m.Z)(),w=(0,u.f3)("$pub"),y=(0,u.f3)("$baseMessage"),b=(0,c.iH)(!1),q=(0,c.iH)({...d.f_}),k=(0,c.iH)(),U=()=>({container_id:"",create_from_where:"extra_path",model_thread_id:"0",persion_input_model_src:"",model_type:""}),T=(0,c.iH)({...U()});function H(e){b.value=!0,T.value.container_id=e,I(),x(e)}function W(){T.value={...U()},b.value=!1,Z.value=[],k.value.resetFields(),v()}function S(){r((()=>{x(T.value.container_id)}))}const V=(0,c.iH)([]);async function I(){const{body:e}=await(0,_.wW)();V.value=e}const Z=(0,c.iH)([]);async function x(e){const{body:t}=await(0,_.Hy)(e);Z.value=t,p(t,"model_id","model_operation_array",Z,_.AB,(()=>{x(e)})),h(t,"model_id","model_operation_array",Z,(()=>(0,_.Hy)(e)))}async function C(){await k.value.validate((async(e,t)=>{if(!e)return!1;const r=await(0,_.t9)(T.value);y(r.msg,"success","vab-hey-message-success");const n=T.value.container_id;k.value.resetFields(),T.value.container_id=n,b.value=!1,w("reload-my-docker-list")}))}return t({showDialog:H}),(e,t)=>{const r=l.EZ,_=a.nH,d=i.BT,m=i.km,f=(0,u.up)("vab-icon"),p=s.Q0,h=o.ElButton,v=a.ly,w=n.d0;return(0,u.wg)(),(0,u.j4)(w,{modelValue:(0,c.SU)(b),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,c.dq)(b)?b.value=e:null),title:"下载数据集",width:"80%",onClose:W},{default:(0,u.w5)((()=>[(0,u.Wm)(v,{ref_key:"formRef",ref:k,"label-width":"auto",model:(0,c.SU)(T),rules:(0,c.SU)(q)},{default:(0,u.w5)((()=>[(0,u.Wm)(_,{label:"数据集地址",prop:"persion_input_model_src"},{default:(0,u.w5)((()=>[(0,u.Wm)(r,{modelValue:(0,c.SU)(T).persion_input_model_src,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,c.SU)(T).persion_input_model_src=e),placeholder:"数据集地址(数据集下载完成后，要点击“应用”才可以添加在容器里面)"},null,8,["modelValue"])])),_:1}),(0,u.Wm)(_,{label:"数据集分类",prop:"model_type"},{default:(0,u.w5)((()=>[(0,u.Wm)(m,{modelValue:(0,c.SU)(T).model_type,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,c.SU)(T).model_type=e),filterable:"",placeholder:"选择数据集保存到的分类",class:"contianer-name-helf"},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,c.SU)(V),(e=>((0,u.wg)(),(0,u.j4)(d,{key:e.type_key,label:e.name,value:e.type_key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,u.Wm)(p,{effect:"dark",content:"外部下载的数据集，请选择数据集的分类，不选择时默认保存在数据集的other路径下",placement:"top",class:"mx-1","raw-content":""},{default:(0,u.w5)((()=>[(0,u.Wm)(f,{icon:"question-line",class:"cursor-pointer"})])),_:1})])),_:1}),(0,u.Wm)(_,null,{label:(0,u.w5)((()=>[])),default:(0,u.w5)((()=>[(0,u.Wm)(h,{type:"primary",onClick:C},{default:(0,u.w5)((()=>[(0,u.Uk)(" 下载 ")])),_:1}),(0,u.Wm)(h,{onClick:W},{default:(0,u.w5)((()=>[(0,u.Uk)("取消")])),_:1})])),_:1})])),_:1},8,["model","rules"]),(0,u.Wm)(g["default"],{list:(0,c.SU)(Z),"container-id":(0,c.SU)(T).container_id,onReload:S},null,8,["list","container-id"])])),_:1},8,["modelValue"])}}};function h(e){e.__source="src/views/gpumarket/myhosts/components/download_dataset_dialog.vue"}var v=r(83744);"function"===typeof h&&h(p);const w=(0,v.Z)(p,[["__scopeId","data-v-415193ef"]]);var y=w}}]);