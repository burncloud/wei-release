/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2024-03-07 17:07:58
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[1046],{31046:function(e,l,t){t.r(l),t.d(l,{default:function(){return C}});var a=t(4350),o=(t(3241),t(91103),t(73481)),_=(t(62029),t(20129)),d=(t(69840),t(15659)),s=(t(10444),t(63715)),u=(t(5508),t(24200)),n=(t(59739),t(57018)),i=(t(74367),t(86398)),h=(t(69448),t(6589),t(87692)),f=(t(45393),t(22411),t(66252)),m=t(2262),r=t(3577),c=t(23471),w=t(85026);const p=e=>((0,f.dD)("data-v-8e682d4c"),e=e(),(0,f.Cn)(),e),U={class:"rentsetting-form-container"},v={key:0},b={key:1},y=p((()=>(0,f._)("label",null,"元/天",-1))),S=p((()=>(0,f._)("label",null,"元/周",-1))),g=p((()=>(0,f._)("label",null,"元/月",-1))),V=p((()=>(0,f._)("label",null,"元/小时/卡",-1))),k=p((()=>(0,f._)("label",null,"元/天/卡",-1))),W=p((()=>(0,f._)("label",null,"元/周/卡",-1))),Y=p((()=>(0,f._)("label",null,"元/月/卡",-1))),H={class:"flex justify-center w-full"};var D={__name:"device_rent_setting_dialog",setup(e,{expose:l}){const t=(0,m.qj)({for_rent:[{id:1,name:"放租"},{id:0,name:"不放租"}],rent_method:[{id:1,name:"整机出租"},{id:0,name:"容器出租"},{id:2,name:"两者都可以"}],price_right:[{id:1,name:"自主定价"},{id:0,name:"统一由平台定价"}]}),p=(0,f.Fl)((()=>M.value.host_for_rent>0&&[1,2].includes(M.value.host_rent_method))),D=(0,f.Fl)((()=>M.value.host_for_rent>0&&[0,2].includes(M.value.host_rent_method))),j=(0,f.Fl)((()=>M.value.host_price_right<=0)),x=(0,f.Fl)((()=>K.value.host_hour_fee)),M=(0,m.iH)({}),C=()=>({client_id:"",host_for_rent:1,host_rent_method:0,host_online_time:"",host_off_time:"",host_price_right:0,host_hour_fee:"",host_daly_fee:"",host_week_fee:"",host_month_fee:"",host_daly_fee_w:"",host_week_fee_w:"",host_month_fee_w:"",agree:!0}),q=(0,m.iH)(!1),z=(0,m.iH)(!1);function F(e){M.value={...C(),client_id:e},q.value=!0,E()}const I=(0,m.iH)({}),K=(0,m.iH)({});async function E(){try{z.value=!0;const{body:{host_info:e,gpu_info:l}}=await(0,c.z4)(M.value.client_id);I.value=e,K.value=l,Z(),Object.assign(M.value,{host_for_rent:parseInt(e.host_for_rent),host_rent_method:parseInt(e.host_rent_method),host_price_right:parseInt(e.host_self_price),host_online_time:e.host_online_time,host_off_time:e.host_off_time}),x.value||(M.value.host_price_right=1,Z())}catch(e){q.value=!1}finally{z.value=!1}}function O(){if(!I.value.host_hour_fee)return!1;const e={host_hour_fee:I.value.host_hour_fee,host_daly_fee:I.value.host_daly_fee,host_week_fee:I.value.host_week_fee,host_month_fee:I.value.host_month_fee,host_daly_fee_w:I.value.host_daly_fee_w,host_week_fee_w:I.value.host_week_fee_w,host_month_fee_w:I.value.host_month_fee_w};Object.assign(M.value,e)}function P(){if(!K.value.host_hour_fee)return!1;const e={host_hour_fee:K.value.host_hour_fee,host_daly_fee:K.value.host_daly_fee,host_week_fee:K.value.host_week_fee,host_month_fee:K.value.host_month_fee,host_daly_fee_w:K.value.host_daly_fee_w,host_week_fee_w:K.value.host_week_fee_w,host_month_fee_w:K.value.host_month_fee_w};Object.assign(M.value,e)}function Z(){M.value.host_price_right>0?(O(),(0,f.Y3)((()=>{G.value.clearValidate(["host_price","container_price"])}))):(P(),(0,f.Y3)((()=>{G.value.clearValidate(["host_price","container_price"])})))}(0,f.YP)((()=>M.value.host_price_right),Z);const B=(0,m.iH)({...(0,w.mw)(M)}),G=(0,m.iH)(),J=(0,m.iH)(!1),R=(0,f.f3)("$baseMessage");async function $(){await G.value.validate((async(e,l)=>{if(!e)return!1;try{J.value=!0;await(0,c.Sm)(M.value);R("设置成功","success","vab-hey-message-success"),q.value=!1}catch(t){}finally{J.value=!1}}))}return l({showDialog:F}),(e,l)=>{const c=h.dn,w=h.KD,C=_.nH,F=i.gi,I=n.EZ,K=u.iJ,E=s.ElCheckbox,O=d.ElButton,P=_.ly,R=o.d0,A=a.t;return(0,f.wg)(),(0,f.iD)("div",U,[(0,f.Wm)(R,{modelValue:(0,m.SU)(q),"onUpdate:modelValue":l[14]||(l[14]=e=>(0,m.dq)(q)?q.value=e:null),title:"设备出租设置",width:"50%"},{default:(0,f.w5)((()=>[(0,f.wy)(((0,f.wg)(),(0,f.j4)(P,{ref_key:"formRef",ref:G,model:(0,m.SU)(M),rules:(0,m.SU)(B),"label-width":"auto"},{default:(0,f.w5)((()=>[(0,f.Wm)(C,{label:"是否放租",prop:"host_for_rent"},{default:(0,f.w5)((()=>[(0,f.Wm)(w,{modelValue:(0,m.SU)(M).host_for_rent,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,m.SU)(M).host_for_rent=e)},{default:(0,f.w5)((()=>[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)((0,m.SU)(t).for_rent,(e=>((0,f.wg)(),(0,f.j4)(c,{key:e.id,label:e.id},{default:(0,f.w5)((()=>[(0,f.Uk)((0,r.zw)(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,f.Wm)(C,{label:"出租方式",prop:"host_rent_method"},{default:(0,f.w5)((()=>[(0,f.Wm)(w,{modelValue:(0,m.SU)(M).host_rent_method,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,m.SU)(M).host_rent_method=e)},{default:(0,f.w5)((()=>[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)((0,m.SU)(t).rent_method,(e=>((0,f.wg)(),(0,f.j4)(c,{key:e.id,label:e.id},{default:(0,f.w5)((()=>[(0,f.Uk)((0,r.zw)(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,f.Wm)(C,{label:"定价规则",prop:"host_price_right"},{default:(0,f.w5)((()=>[(0,f.Wm)(w,{modelValue:(0,m.SU)(M).host_price_right,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,m.SU)(M).host_price_right=e),onChange:Z},{default:(0,f.w5)((()=>[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)((0,m.SU)(t).price_right,(e=>((0,f.wg)(),(0,f.j4)(c,{key:e.id,label:e.id},{default:(0,f.w5)((()=>[(0,f.Uk)((0,r.zw)(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,m.SU)(j)&&!(0,m.SU)(x)?((0,f.wg)(),(0,f.iD)("div",v,[(0,f.Wm)(C,{label:" "},{default:(0,f.w5)((()=>[(0,f.Wm)(F,{type:"danger"},{default:(0,f.w5)((()=>[(0,f.Uk)(" 因系统暂时没有该类型GPU的租金定价，暂时不能使用统一定价，请自主定出租价格，如果需要定价帮助，请联系客服。 ")])),_:1})])),_:1})])):((0,f.wg)(),(0,f.iD)("div",b,[(0,m.SU)(p)?((0,f.wg)(),(0,f.j4)(C,{key:0,label:"整机价格",prop:"host_price"},{default:(0,f.w5)((()=>[(0,f.Wm)(I,{modelValue:(0,m.SU)(M).host_daly_fee_w,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,m.SU)(M).host_daly_fee_w=e),placeholder:"",class:"input-day",disabled:(0,m.SU)(j)},{suffix:(0,f.w5)((()=>[y])),_:1},8,["modelValue","disabled"]),(0,f.Wm)(I,{modelValue:(0,m.SU)(M).host_week_fee_w,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,m.SU)(M).host_week_fee_w=e),placeholder:"",class:"input-day",disabled:(0,m.SU)(j)},{suffix:(0,f.w5)((()=>[S])),_:1},8,["modelValue","disabled"]),(0,f.Wm)(I,{modelValue:(0,m.SU)(M).host_month_fee_w,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,m.SU)(M).host_month_fee_w=e),placeholder:"",class:"input-day",disabled:(0,m.SU)(j)},{suffix:(0,f.w5)((()=>[g])),_:1},8,["modelValue","disabled"])])),_:1})):(0,f.kq)("",!0),(0,m.SU)(D)?((0,f.wg)(),(0,f.j4)(C,{key:1,label:"容器出租",prop:"container_price"},{default:(0,f.w5)((()=>[(0,f.Wm)(I,{modelValue:(0,m.SU)(M).host_hour_fee,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,m.SU)(M).host_hour_fee=e),placeholder:"",class:"input-day",disabled:(0,m.SU)(j)},{suffix:(0,f.w5)((()=>[V])),_:1},8,["modelValue","disabled"]),(0,f.Wm)(I,{modelValue:(0,m.SU)(M).host_daly_fee,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,m.SU)(M).host_daly_fee=e),placeholder:"",class:"input-day",disabled:(0,m.SU)(j)},{suffix:(0,f.w5)((()=>[k])),_:1},8,["modelValue","disabled"]),(0,f.Wm)(I,{modelValue:(0,m.SU)(M).host_week_fee,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,m.SU)(M).host_week_fee=e),placeholder:"",class:"input-day",disabled:(0,m.SU)(j)},{suffix:(0,f.w5)((()=>[W])),_:1},8,["modelValue","disabled"]),(0,f.Wm)(I,{modelValue:(0,m.SU)(M).host_month_fee,"onUpdate:modelValue":l[9]||(l[9]=e=>(0,m.SU)(M).host_month_fee=e),placeholder:"",class:"input-day",disabled:(0,m.SU)(j)},{suffix:(0,f.w5)((()=>[Y])),_:1},8,["modelValue","disabled"])])),_:1})):(0,f.kq)("",!0)])),(0,f.Wm)(C,{label:"上架时间",prop:"host_online_time"},{default:(0,f.w5)((()=>[(0,f.Wm)(K,{modelValue:(0,m.SU)(M).host_online_time,"onUpdate:modelValue":l[10]||(l[10]=e=>(0,m.SU)(M).host_online_time=e),type:"datetime",placeholder:"上架时间",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm"},null,8,["modelValue"])])),_:1}),(0,f.Wm)(C,{label:"下架时间",prop:"host_off_time"},{default:(0,f.w5)((()=>[(0,f.Wm)(K,{modelValue:(0,m.SU)(M).host_off_time,"onUpdate:modelValue":l[11]||(l[11]=e=>(0,m.SU)(M).host_off_time=e),type:"datetime",placeholder:"下架时间",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm"},null,8,["modelValue"])])),_:1}),(0,f.Wm)(C,{label:"出租协议",prop:"agree"},{default:(0,f.w5)((()=>[(0,f.Wm)(E,{modelValue:(0,m.SU)(M).agree,"onUpdate:modelValue":l[12]||(l[12]=e=>(0,m.SU)(M).agree=e),label:"请详细阅读设备出租协议，在租赁期间共同遵守"},null,8,["modelValue"])])),_:1}),(0,f.Wm)(C,{label:""},{default:(0,f.w5)((()=>[(0,f._)("div",H,[(0,f.Wm)(O,{loading:(0,m.SU)(J),type:"primary",onClick:$},{default:(0,f.w5)((()=>[(0,f.Uk)(" 保存 ")])),_:1},8,["loading"]),(0,f.Wm)(O,{onClick:l[13]||(l[13]=e=>q.value=!1)},{default:(0,f.w5)((()=>[(0,f.Uk)("取消")])),_:1})])])),_:1})])),_:1},8,["model","rules"])),[[A,(0,m.SU)(z)]])])),_:1},8,["modelValue"])])}}};function j(e){e.__source="src/views/gpumarket/mydevice/components/device_rent_setting_dialog.vue"}var x=t(83744);"function"===typeof j&&j(D);const M=(0,x.Z)(D,[["__scopeId","data-v-8e682d4c"]]);var C=M}}]);