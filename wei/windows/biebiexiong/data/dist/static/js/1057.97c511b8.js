/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2024-03-07 17:07:58
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[1057,8123,6700,3185],{81464:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(81095),a=n(26593);function i(e,t=""){const n=t?`拷贝${t}成功`:`拷贝${e}成功`;r.gp.$baseMessage(n,"success","vab-hey-message-success",!1)}function s(e,t=""){const n=t?`拷贝${t}失败`:`拷贝${e}失败`;r.gp.$baseMessage(n,"error","vab-hey-message-success",!1)}function o(e,t=""){const{isSupported:n,copy:r}=(0,a.VPI)();n||(0,a.gIw)("clipboard-write"),r(e).then((()=>{i(e,t)})).catch((n=>{console.log(n),s(e,t)}))}},61653:function(e,t,n){n.d(t,{Ei:function(){return o},i$:function(){return c},p6:function(){return u}});var r=n(27484),a=n.n(r),i=(n(33852),n(84110)),s=n.n(i);function o(e){return a().locale("zh-cn"),a()(e).fromNow()}function u(e,t="YYYY-MM-DD HH:mm:ss"){return a()(e).format(t)}function c(e,t="YYYY-MM-DD HH:mm:ss"){return e>0?u(1e3*e,t):"---"}a().extend(s())},20681:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(95965);function a(){const{startIntervalTimer:e,stopIntervalTimer:t}=(0,r.Z)();let n,a,i={};function s(r,a,s,o,u,c){const l=r.filter((e=>e[s].showProcess));i={},t(n),0!==l.length&&(n=e((async()=>{const e=l.map((e=>e[a])),{body:{list:t}}=await u(e);let n=!1;for(const r in t){const{stop:e,progress_num:u,progress_text:c}=t[r],l=o.value.find((e=>e[a]===r));l[s].progress_num||(l[s].progress_num=0);const m=parseInt(u);m>l[s].progress_num&&(l[s].progress_num=m,l[s].progress_text=c,i[r]={progress_num:m,progress_text:c}),e&&(n=!0)}n&&c()})))}function o(n,r,s,o,u){const c=n.filter((e=>e[s].time_flash_list));t(a),0!==c.length&&(a=e((async()=>{const{body:e}=await u();for(const t in i){const n=i[t],a=e.find((e=>e[r]===t));a&&Object.assign(a[s],n)}o.value=e;const n=e.filter((e=>e[s].time_flash_list));n.length<=0&&t(a)}),5e3))}function u(){t(n),t(a)}return{startLoadProgress:s,startReloadList:o,stopTimer:u}}},42238:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(22201),a=n(2262),i=n(66252);function s(e){const t=(0,r.yj)(),n=(0,a.iH)(t.params.id);return(0,i.YP)((()=>t.params.id),(()=>{t.params.id?(n.value=t.params.id,e()):n.value=""})),{paramsId:n}}},95965:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(23279),a=n.n(r);function i(){function e(e,t=3e3){return setInterval((()=>{e()}),t)}function t(e){e&&clearInterval(e)}function n(e,t=1e4){return setTimeout((()=>{e()}),t)}function r(e,t=3e3){a()((()=>{e()}),t)()}return{startIntervalTimer:e,stopIntervalTimer:t,startTimeoutTimer:n,startDebounce:r}}},48123:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var r=n(66252),a=n(2262),i=n(81464),s={__name:"index",props:{text:{type:String,default:""},title:{type:String,default:""}},setup(e){return(t,n)=>{const s=(0,r.up)("vab-icon");return(0,r.wg)(),(0,r.j4)(s,{icon:"file-copy-2-line",class:"cursor-pointer",onClick:n[0]||(n[0]=t=>(0,a.SU)(i.Z)(e.text,e.title))})}}};function o(e){e.__source="src/components/ClipboardButton/index.vue"}"function"===typeof o&&o(s);const u=s;var c=u},30647:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var r=n(3837),a=(n(3241),n(81010),n(76128)),i=(n(74828),n(50591)),s=(n(89035),n(15659)),o=(n(10444),n(32018)),u=(n(46160),n(50363),n(10661)),c=(n(35095),n(66252)),l=n(2262),m=n(3577),_=n(96486),f=n(23471),p=n(61653),g=n(99144),d=n(48123),w=n(95965),y=n(42238),v=n(20681);const k={key:1},b={class:"el-progress-action"};var h={__name:"image_list",setup(e){const t=(0,c.f3)("$baseMessage"),n=(0,c.f3)("$sub"),h=(0,c.f3)("$unsub"),{startLoadProgress:W,startReloadList:C,stopTimer:I}=(0,v.Z)(),{startTimeoutTimer:T}=(0,w.Z)(),x=(0,l.iH)([]),Y=(0,c.Fl)((()=>x.value.map((e=>(e.link=e.img_forum_id>0?{path:"/gpumarket/image",query:{id:e.img_forum_id}}:"",e.diff_time=e.img_create_time?(0,p.Ei)(1e3*e.img_create_time):"---",e.cut_img_name=(0,_.truncate)(e.img_name,{length:35,separator:"..."}),e))))),{paramsId:j}=(0,y.Z)((()=>{I(),z()}));async function z(){const{body:e}=await(0,f.co)(j.value);x.value=e,W(e,"img_id","img_operation_array",x,f.sw,z),C(e,"img_id","img_operation_array",x,(()=>(0,f.co)(j.value)))}n("reload-image-list",(()=>{I(),z()})),(0,c.bv)((()=>{z()})),(0,c.Ah)((()=>{I(),h("reload-image-list")}));const $=(0,l.iH)();async function D(e,t){$.value.showDialog(j.value,e,t)}async function U(e){await(0,f.Vf)(j.value,e),t("删除镜像成功","success","vab-hey-message-success"),T((()=>{z()}))}async function Z(e){const n={client_id:j.value,create_from_where:"image_list",image_thread_id:e,persion_input_image_src:""};await(0,f.t4)(n),t("拉取镜像成功","success","vab-hey-message-success"),T((()=>{z()}))}async function H(e){await(0,f.Xc)(e),t("取消收藏成功","success","vab-hey-message-success"),T((()=>{z()}))}return(e,t)=>{const n=(0,c.up)("router-link"),_=u.Q0,f=r.$Y,p=(0,c.up)("vab-icon"),w=o.Xh,y=s.ElButton,v=i.i1,h=a.GT,W=r.eI;return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.Wm)(W,{fit:"",flexible:"",stripe:"","table-layout":"auto",data:(0,l.SU)(Y),class:"data-list"},{empty:(0,c.w5)((()=>[(0,c.Wm)(h,{class:"vab-data-empty",description:"本机暂时没有镜像，请到镜像市场选择心仪的镜像并收藏，然后就能在这里拉取啦"})])),default:(0,c.w5)((()=>[(0,c.Wm)(f,{label:"镜像名称",prop:"img_name"},{default:(0,c.w5)((({row:e})=>[(0,c.Wm)(_,{placement:"top",content:e.img_name},{default:(0,c.w5)((()=>[e.link?((0,c.wg)(),(0,c.j4)(n,{key:0,to:e.link},{default:(0,c.w5)((()=>[(0,c.Uk)((0,m.zw)(e.cut_img_name),1)])),_:2},1032,["to"])):((0,c.wg)(),(0,c.iD)("span",k,(0,m.zw)(e.cut_img_name),1))])),_:2},1032,["content"]),(0,c.Wm)((0,l.SU)(d["default"]),{text:e.img_name},null,8,["text"])])),_:1}),(0,c.Wm)(f,{label:"TAG",prop:"img_tag"}),(0,c.Wm)(f,{label:"大小",prop:"img_size"}),(0,c.Wm)(f,{label:"发布时间",prop:"diff_time"}),(0,c.Wm)(f,{label:"状态",prop:"img_status_str"},{default:(0,c.w5)((({row:e})=>[(0,c.Uk)((0,m.zw)(e.img_status_str)+" ",1),e.img_hint?((0,c.wg)(),(0,c.j4)(_,{key:0,placement:"top",content:e.img_hint},{default:(0,c.w5)((()=>[(0,c.Wm)(p,{icon:"error-warning-line",style:(0,m.j5)({color:"var(--el-color-danger)"})},null,8,["style"])])),_:2},1032,["content"])):(0,c.kq)("",!0)])),_:1}),(0,c.Wm)(f,{label:"所属",prop:"img_forum_id"},{default:(0,c.w5)((({row:e})=>[(0,c.Uk)((0,m.zw)(e.img_forum_id>0?"共用":"私有"),1)])),_:1}),(0,c.Wm)(f,{label:"位置",prop:"img_where_str",sortable:""}),(0,c.Wm)(f,{label:"操作",prop:"truedata"},{default:(0,c.w5)((({row:e})=>[(0,c._)("div",b,[e.img_operation_array.showProcess?((0,c.wg)(),(0,c.j4)(w,{key:0,"text-inside":!0,"stroke-width":20,percentage:e.img_operation_array.progress_num,striped:"",size:"small"},null,8,["percentage"])):((0,c.wg)(),(0,c.iD)(c.HY,{key:1},[e.img_operation_array.showPullButtun?((0,c.wg)(),(0,c.j4)(y,{key:0,type:"primary",size:"small",onClick:t=>Z(e.img_forum_id)},{default:(0,c.w5)((()=>[(0,c.Uk)(" 拉取 ")])),_:2},1032,["onClick"])):(0,c.kq)("",!0),e.img_operation_array.createContainer?((0,c.wg)(),(0,c.j4)(y,{key:1,type:"primary",size:"small",onClick:t=>D(e.img_id,e.img_forum_id)},{default:(0,c.w5)((()=>[(0,c.Uk)(" 创建容器 ")])),_:2},1032,["onClick"])):(0,c.kq)("",!0)],64)),e.img_operation_array.delete?((0,c.wg)(),(0,c.j4)(v,{key:2,title:"确定删除此镜像吗？",onConfirm:t=>U(e.img_id)},{reference:(0,c.w5)((()=>[(0,c.Wm)(y,{type:"danger",size:"small"},{default:(0,c.w5)((()=>[(0,c.Uk)("删除")])),_:1})])),_:2},1032,["onConfirm"])):(0,c.kq)("",!0),e.img_favid?((0,c.wg)(),(0,c.j4)(v,{key:3,title:"确定取消收藏此镜像？",onConfirm:t=>H(e.img_favid)},{reference:(0,c.w5)((()=>[(0,c.Wm)(y,{type:"warning",size:"small"},{default:(0,c.w5)((()=>[(0,c.Uk)("取消收藏")])),_:1})])),_:2},1032,["onConfirm"])):(0,c.kq)("",!0)])])),_:1})])),_:1},8,["data"]),(0,c.Wm)(g["default"],{ref_key:"createContainerDialogRef",ref:$},null,512)],64)}}};function W(e){e.__source="src/views/gpumarket/mydevice/components/image_list.vue"}var C=n(83744);"function"===typeof W&&W(h);const I=(0,C.Z)(h,[["__scopeId","data-v-603eae0f"]]);var T=I}}]);