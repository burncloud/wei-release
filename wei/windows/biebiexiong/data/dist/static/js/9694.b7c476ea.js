/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2024-03-07 17:07:58
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[9694],{49694:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});var n=a(49676),o=(a(3241),a(73204),a(3837)),l=(a(81010),a(76128)),_=(a(74828),a(50591)),i=(a(89035),a(15659)),s=(a(10444),a(32018)),c=(a(46160),a(10661)),r=(a(35095),a(50363),a(66252)),u=a(3577),d=a(2262),p=a(48123),m=a(88540),f=a(70076),w=a(89764),y=a(95965),k=a(23471);const g={class:"box"},h={key:0},v={key:1},U={key:0},b={key:1},W={key:0},z={key:0},D={key:1},x={key:2},C={key:3},S={class:"el-progress-action"};var q={__name:"docker_list",props:{tableData:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>{}},page:{type:Number,default:1}},emits:["change-page","reload"],setup(e,{emit:t}){const a=(0,r.f3)("$baseMessage"),{startTimeoutTimer:q}=(0,y.Z)();function H(e){t("change-page",e)}const j=(0,d.iH)();function T(e){j.value.showDialog(e)}const V=(0,d.iH)();function R(e){V.value.showDialog(e)}async function Z(e,n){await(0,k.ET)(e,n),a("开启容器成功","success","vab-hey-message-success"),q((()=>{t("reload")}))}async function $(e,n){await(0,k.U$)(e,n),a("停止容器成功","success","vab-hey-message-success"),q((()=>{t("reload")}))}async function B(e,n){await(0,k.BX)(e,n),a("删除容器成功","success","vab-hey-message-success"),q((()=>{t("reload")}))}const E=(0,d.iH)();function I(e){E.value.showDialog(e)}return(t,a)=>{const y=o.$Y,k=c.Q0,q=s.Xh,P=i.ElButton,Y=_.i1,F=l.GT,M=o.eI,A=n.R;return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(M,{fit:"",flexible:"",stripe:"","table-layout":"auto",data:e.tableData,"row-key":"ct_id",class:"data-list"},{empty:(0,r.w5)((()=>[(0,r.Wm)(F,{class:"vab-data-empty",description:"暂无容器，请到“算力市场”选择主机创建容器"})])),default:(0,r.w5)((()=>[(0,r.Wm)(y,{type:"expand",fixed:""},{default:(0,r.w5)((({row:e})=>[(0,r._)("div",g,[(0,r._)("div",null,[(0,r._)("p",null," GPU："+(0,u.zw)(e.ct_host_gpu_name)+" * "+(0,u.zw)(e.ct_gpu_count)+" 编号："+(0,u.zw)(e.ct_gpu_ids),1),(0,r._)("p",null,"CPU："+(0,u.zw)(e.ct_host_cpu_name)+" * 1",1),(0,r._)("p",null,"内存："+(0,u.zw)(e.ct_host_memony),1),(0,r._)("p",null,"硬盘："+(0,u.zw)(e.ct_host_disk_type_str),1),(0,r._)("p",null," 网络："+(0,u.zw)(e.ct_host_net_type_str)+" "+(0,u.zw)(e.ct_host_address_str),1),e.ct_connectinfo.paths.length?((0,r.wg)(),(0,r.iD)("p",h," 默认挂载地址： "+(0,u.zw)(e.ct_connectinfo.paths.join(",")),1)):(0,r.kq)("",!0),e.ct_connectinfo.paths_other.length?((0,r.wg)(),(0,r.iD)("p",v," 其它挂载地址： "+(0,u.zw)(e.ct_connectinfo.paths_other.join(",")),1)):(0,r.kq)("",!0),(0,r._)("p",null,[(0,r.Uk)(" 用户名："+(0,u.zw)(e.ct_connectinfo.user)+" ",1),(0,r.Wm)((0,d.SU)(p["default"]),{text:e.ct_connectinfo.user,title:"用户名"},null,8,["text"]),e.ct_connectinfo.password?((0,r.wg)(),(0,r.iD)("span",U,[(0,r.Uk)(" 密码：****** "),(0,r.Wm)((0,d.SU)(p["default"]),{text:e.ct_connectinfo.password,title:"密码"},null,8,["text"])])):((0,r.wg)(),(0,r.iD)("span",b,"无密码"))]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.ct_connectinfo.ports,((e,t)=>((0,r.wg)(),(0,r.iD)("p",{key:t},[(0,r.Uk)((0,u.zw)(e.text)+" ",1),(0,r.Wm)((0,d.SU)(p["default"]),{text:e.value},null,8,["text"])])))),128))]),e.ct_show_rent_info?((0,r.wg)(),(0,r.iD)("div",W,[e.ct_rent_type_str?((0,r.wg)(),(0,r.iD)("p",z," 租赁方式： "+(0,u.zw)(e.ct_rent_type_str),1)):(0,r.kq)("",!0),e.ct_current_rent_fee?((0,r.wg)(),(0,r.iD)("p",D," 租金："+(0,u.zw)(e.ct_current_rent_fee),1)):(0,r.kq)("",!0),(0,r._)("p",null,"租赁卡数："+(0,u.zw)(e.ct_gpu_count)+"张",1),e.ct_rent_start_time||e.ct_rent_end_time?((0,r.wg)(),(0,r.iD)("p",x," 起租日期："+(0,u.zw)(e.ct_rent_start_time)+" - "+(0,u.zw)(e.ct_rent_end_time),1)):(0,r.kq)("",!0),e.ct_rent_next_point_time_str?((0,r.wg)(),(0,r.iD)("p",C,(0,u.zw)(e.ct_rent_next_point_time_str)+" 元 ",1)):(0,r.kq)("",!0),(0,r._)("p",null,"所属机房："+(0,u.zw)(e.ct_host_room_str),1)])):(0,r.kq)("",!0)])])),_:1}),(0,r.Wm)(y,{label:"主机UUID",prop:"ct_host_name",sortable:""},{default:(0,r.w5)((({row:e})=>[(0,r.Wm)(k,{effect:"dark",content:e.ct_host_name,placement:"top"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,u.zw)(e.format_ct_host_name),1)])),_:2},1032,["content"]),(0,r.Wm)((0,d.SU)(p["default"]),{text:e.ct_host_name},null,8,["text"])])),_:1}),(0,r.Wm)(y,{label:"容器名称",prop:"ct_name"},{default:(0,r.w5)((({row:e})=>[(0,r.Uk)((0,u.zw)(e.ct_name)+" ",1),(0,r.Wm)((0,d.SU)(p["default"]),{text:e.ct_name},null,8,["text"])])),_:1}),(0,r.Wm)(y,{label:"基于镜像",prop:"ct_image_ci_name",sortable:""},{default:(0,r.w5)((({row:e})=>[(0,r.Wm)(k,{effect:"dark",content:e.ct_image_ci_name,placement:"top"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,u.zw)(e.format_ct_image_ci_name),1)])),_:2},1032,["content"]),(0,r.Wm)((0,d.SU)(p["default"]),{text:e.ct_image_ci_name},null,8,["text"])])),_:1}),(0,r.Wm)(y,{label:"状态",prop:"ct_use_status_str"}),(0,r.Wm)(y,{label:"主机",prop:"ct_host_status_str"}),(0,r.Wm)(y,{label:"到期",prop:"rent_diff_date"}),(0,r.Wm)(y,{label:"操作",prop:"truedata"},{default:(0,r.w5)((({row:e})=>[(0,r._)("div",S,[e.ct_operation_array.showProcess?((0,r.wg)(),(0,r.j4)(q,{key:0,"text-inside":!0,"stroke-width":20,percentage:e.ct_operation_array.progress_num,striped:"",size:"small"},null,8,["percentage"])):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[e.ct_operation_array.download_model?((0,r.wg)(),(0,r.j4)(P,{key:0,type:"primary",size:"small",onClick:t=>T(e.ct_id)},{default:(0,r.w5)((()=>[(0,r.Uk)(" 下载模型 ")])),_:2},1032,["onClick"])):(0,r.kq)("",!0),e.ct_operation_array.download_dataset?((0,r.wg)(),(0,r.j4)(P,{key:1,type:"primary",size:"small",onClick:t=>R(e.ct_id)},{default:(0,r.w5)((()=>[(0,r.Uk)(" 下载数据集 ")])),_:2},1032,["onClick"])):(0,r.kq)("",!0),e.ct_operation_array.startContainer?((0,r.wg)(),(0,r.j4)(P,{key:2,type:"primary",size:"small",onClick:t=>Z(e.ct_host_id,e.ct_id)},{default:(0,r.w5)((()=>[(0,r.Uk)(" 开启 ")])),_:2},1032,["onClick"])):(0,r.kq)("",!0),e.ct_operation_array.stopContainer?((0,r.wg)(),(0,r.j4)(P,{key:3,type:"warning",size:"small",onClick:t=>$(e.ct_host_id,e.ct_id)},{default:(0,r.w5)((()=>[(0,r.Uk)(" 停止 ")])),_:2},1032,["onClick"])):(0,r.kq)("",!0),e.ct_operation_array.allowExtendTheRentTime?((0,r.wg)(),(0,r.j4)(P,{key:4,type:"success",size:"small",onClick:t=>I(e.ct_id)},{default:(0,r.w5)((()=>[(0,r.Uk)(" 续费 ")])),_:2},1032,["onClick"])):(0,r.kq)("",!0)],64)),e.ct_operation_array.delete?((0,r.wg)(),(0,r.j4)(Y,{key:2,title:"确定删除此容器吗？",onConfirm:t=>B(e.ct_host_id,e.ct_id)},{reference:(0,r.w5)((()=>[(0,r.Wm)(P,{type:"danger",size:"small"},{default:(0,r.w5)((()=>[(0,r.Uk)("删除")])),_:1})])),_:2},1032,["onConfirm"])):(0,r.kq)("",!0)])])),_:1})])),_:1},8,["data"]),(0,r.Wm)(m["default"],{ref_key:"downloadModelDialogRef",ref:j},null,512),(0,r.Wm)(f["default"],{ref_key:"downloadDatasetDialogRef",ref:V},null,512),(0,r.Wm)((0,d.SU)(w["default"]),{ref_key:"rentFeeDialogRef",ref:E,"renew-for":"0",onDone:a[0]||(a[0]=e=>t.$emit("reload"))},null,512),(0,r.Wm)(A,{"current-page":e.page,layout:"prev, pager, next","page-size":e.pagination.pageSize,total:e.pagination.total,onCurrentChange:H},null,8,["current-page","page-size","total"])])}}};function H(e){e.__source="src/views/gpumarket/myhosts/components/docker_list.vue"}var j=a(83744);"function"===typeof H&&H(q);const T=(0,j.Z)(q,[["__scopeId","data-v-67937bef"]]);var V=T},70076:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var n=a(73481),o=(a(3241),a(62029),a(20129)),l=(a(69840),a(15659)),_=(a(10444),a(10661)),i=(a(35095),a(47820)),s=(a(50986),a(61715),a(6589),a(57018)),c=(a(74367),a(66252)),r=a(2262),u=a(71726),d=a(85026),p=a(68367),m=a(20681),f=a(95965),w={__name:"download_dataset_dialog",setup(e,{expose:t}){const{startTimeoutTimer:a}=(0,f.Z)(),{startLoadProgress:w,startReloadList:y,stopTimer:k}=(0,m.Z)(),g=(0,c.f3)("$pub"),h=(0,c.f3)("$baseMessage"),v=(0,r.iH)(!1),U=(0,r.iH)({...d.f_}),b=(0,r.iH)(),W=()=>({container_id:"",create_from_where:"extra_path",model_thread_id:"0",persion_input_model_src:"",model_type:""}),z=(0,r.iH)({...W()});function D(e){v.value=!0,z.value.container_id=e,q(),j(e)}function x(){z.value={...W()},v.value=!1,H.value=[],b.value.resetFields(),k()}function C(){a((()=>{j(z.value.container_id)}))}const S=(0,r.iH)([]);async function q(){const{body:e}=await(0,u.wW)();S.value=e}const H=(0,r.iH)([]);async function j(e){const{body:t}=await(0,u.Hy)(e);H.value=t,w(t,"model_id","model_operation_array",H,u.AB,(()=>{j(e)})),y(t,"model_id","model_operation_array",H,(()=>(0,u.Hy)(e)))}async function T(){await b.value.validate((async(e,t)=>{if(!e)return!1;const a=await(0,u.t9)(z.value);h(a.msg,"success","vab-hey-message-success");const n=z.value.container_id;b.value.resetFields(),z.value.container_id=n,v.value=!1,g("reload-my-docker-list")}))}return t({showDialog:D}),(e,t)=>{const a=s.EZ,u=o.nH,d=i.BT,m=i.km,f=(0,c.up)("vab-icon"),w=_.Q0,y=l.ElButton,k=o.ly,g=n.d0;return(0,c.wg)(),(0,c.j4)(g,{modelValue:(0,r.SU)(v),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,r.dq)(v)?v.value=e:null),title:"下载数据集",width:"80%",onClose:x},{default:(0,c.w5)((()=>[(0,c.Wm)(k,{ref_key:"formRef",ref:b,"label-width":"auto",model:(0,r.SU)(z),rules:(0,r.SU)(U)},{default:(0,c.w5)((()=>[(0,c.Wm)(u,{label:"数据集地址",prop:"persion_input_model_src"},{default:(0,c.w5)((()=>[(0,c.Wm)(a,{modelValue:(0,r.SU)(z).persion_input_model_src,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,r.SU)(z).persion_input_model_src=e),placeholder:"数据集地址(数据集下载完成后，要点击“应用”才可以添加在容器里面)"},null,8,["modelValue"])])),_:1}),(0,c.Wm)(u,{label:"数据集分类",prop:"model_type"},{default:(0,c.w5)((()=>[(0,c.Wm)(m,{modelValue:(0,r.SU)(z).model_type,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,r.SU)(z).model_type=e),filterable:"",placeholder:"选择数据集保存到的分类",class:"contianer-name-helf"},{default:(0,c.w5)((()=>[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)((0,r.SU)(S),(e=>((0,c.wg)(),(0,c.j4)(d,{key:e.type_key,label:e.name,value:e.type_key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,c.Wm)(w,{effect:"dark",content:"外部下载的数据集，请选择数据集的分类，不选择时默认保存在数据集的other路径下",placement:"top",class:"mx-1","raw-content":""},{default:(0,c.w5)((()=>[(0,c.Wm)(f,{icon:"question-line",class:"cursor-pointer"})])),_:1})])),_:1}),(0,c.Wm)(u,null,{label:(0,c.w5)((()=>[])),default:(0,c.w5)((()=>[(0,c.Wm)(y,{type:"primary",onClick:T},{default:(0,c.w5)((()=>[(0,c.Uk)(" 下载 ")])),_:1}),(0,c.Wm)(y,{onClick:x},{default:(0,c.w5)((()=>[(0,c.Uk)("取消")])),_:1})])),_:1})])),_:1},8,["model","rules"]),(0,c.Wm)(p["default"],{list:(0,r.SU)(H),"container-id":(0,r.SU)(z).container_id,onReload:C},null,8,["list","container-id"])])),_:1},8,["modelValue"])}}};function y(e){e.__source="src/views/gpumarket/myhosts/components/download_dataset_dialog.vue"}var k=a(83744);"function"===typeof y&&y(w);const g=(0,k.Z)(w,[["__scopeId","data-v-415193ef"]]);var h=g}}]);