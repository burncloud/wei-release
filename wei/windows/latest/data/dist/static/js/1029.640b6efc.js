/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2024-01-24 12:03:10
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[1029,8123],{44904:function(e,t,n){n.d(t,{GT:function(){return u},Nl:function(){return l},Pb:function(){return m},_S:function(){return c},_c:function(){return d},fZ:function(){return s},nD:function(){return i}});var o=n(96486),r=n(92325),a=n(11555);function s(e){const t=(0,o.pickBy)(e,(e=>""!==e));return(0,r.Z)({url:"/wwwapi.php?to=suanli_market_model&filter=typeid",method:"get",params:t})}async function i(e,t){return(0,a.Gv)().then((({body:{hash:n}})=>{const a={formhash:n,searchoption:{[t.inputId]:{value:t.keyword}},searchsortsubmit:""},s=(0,o.pickBy)(e,(e=>""!==e));return(0,r.Z)({url:"/wwwapi.php?to=suanli_market_model&filter=sortid",method:"post",params:s,data:a})}))}function l(e){return(0,r.Z)({url:"/wwwapi.php?to=postFavlist&thread_forum=suanli_model",method:"get",params:e})}function u(){return(0,r.Z)({url:"/wwwapi.php?to=suanli_market&modac=model_down_form",method:"get"})}function c(e){return(0,r.Z)({url:"/wwwapi.php?to=suanli_market&modac=download_model",method:"post",data:e})}async function d(e){const{body:{hash:t}}=await(0,a.Gv)();return(0,r.Z)({url:"/wwwapi.php?to=postFavAdd",method:"get",params:{id:e,formhash:t}})}async function m(e){const{body:{hash:t}}=await(0,a.Gv)();return(0,r.Z)({url:"/wwwapi.php?to=postFavDel",method:"post",data:{favid:e,formhash:t}})}},71726:function(e,t,n){n.d(t,{Bb:function(){return a},C0:function(){return l},LN:function(){return c},Pb:function(){return m},S1:function(){return d},_S:function(){return i},e$:function(){return u},oh:function(){return s}});var o=n(92325),r=n(11555);function a(e,t){return(0,o.Z)({url:"/wwwapi.php?to=suanli_market&modac=container_list",method:"post",params:e,data:t})}function s(){return(0,o.Z)({url:"/wwwapi.php?to=suanli_model&modac=download_form",method:"get"})}function i(e){return(0,o.Z)({url:"/wwwapi.php?to=suanli_model&modac=download_model_container",method:"post",data:e})}function l(e){return(0,o.Z)({url:"/wwwapi.php?to=suanli_model&modac=device_model",method:"get",params:{container_id:e}})}function u(e){return(0,o.Z)({url:"/wwwapi.php?to=suanli_model&modac=get_download_progres",method:"get",data:{model_id:e}})}function c(e){return(0,o.Z)({url:"/wwwapi.php?to=suanli_model&modac=model_apply",method:"post",data:e})}function d(e){return(0,o.Z)({url:"/wwwapi.php?to=suanli_model&modac=model_delete",method:"get",params:{host_model_id:e}})}async function m(e){const{body:{hash:t}}=await(0,r.Gv)();return(0,o.Z)({url:"/wwwapi.php?to=postFavDel",method:"post",data:{favid:e,formhash:t}})}},81464:function(e,t,n){n.d(t,{Z:function(){return i}});var o=n(81095),r=n(26593);function a(e){o.gp.$baseMessage(`拷贝${e}成功`,"success","vab-hey-message-success",!1)}function s(e){o.gp.$baseMessage(`拷贝${e}失败`,"error","vab-hey-message-success",!1)}function i(e){const{isSupported:t,copy:n}=(0,r.VPI)();t||(0,r.gIw)("clipboard-write"),n(e).then((()=>{a(e)})).catch((t=>{console.log(t),s(e)}))}},20681:function(e,t,n){n.d(t,{Z:function(){return r}});var o=n(95965);function r(){const{startIntervalTimer:e,stopIntervalTimer:t}=(0,o.Z)();let n,r,a={};function s(o,r,s,i,l,u){const c=o.filter((e=>e[s].showProcess));a={},t(n),0!==c.length&&(n=e((async()=>{const e=c.map((e=>e[r])),{body:{list:t}}=await l(e);let n=!1;for(const o in t){const{stop:e,progress_num:l,progress_text:u}=t[o],c=i.value.find((e=>e[r]===o));c[s].progress_num||(c[s].progress_num=0);const d=parseInt(l);d>c[s].progress_num&&(c[s].progress_num=d,c[s].progress_text=u,a[o]={progress_num:d,progress_text:u}),e&&(n=!0)}n&&u()})))}function i(n,o,s,i,l){const u=n.filter((e=>e[s].time_flash_list));t(r),0!==u.length&&(r=e((async()=>{const{body:e}=await l();for(const t in a){const n=a[t],r=e.find((e=>e[o]===t));r&&Object.assign(r[s],n)}i.value=e;const n=e.filter((e=>e[s].time_flash_list));n.length<=0&&t(r)}),5e3))}function l(){t(n),t(r)}return{startLoadProgress:s,startReloadList:i,stopTimer:l}}},95965:function(e,t,n){n.d(t,{Z:function(){return a}});var o=n(23279),r=n.n(o);function a(){function e(e,t=3e3){return setInterval((()=>{e()}),t)}function t(e){e&&clearInterval(e)}function n(e,t=1e4){return setTimeout((()=>{e()}),t)}function o(e,t=3e3){r()((()=>{e()}),t)()}return{startIntervalTimer:e,stopIntervalTimer:t,startTimeoutTimer:n,startDebounce:o}}},85026:function(e,t,n){n.d(t,{$j:function(){return s},MH:function(){return a},U$:function(){return u},Y2:function(){return o},bT:function(){return r},f_:function(){return l},wH:function(){return i}});const o={agree:[{validator(e,t,n){return t},message:"请同意挂机协议",trigger:"change"}]},r={container_name:[{required:!0,message:"容器名称必填",trigger:"change"}],persion_input_image_src:[{required:!0,message:"镜像地址必填",trigger:"change"}]},a={persion_input_image_src:[{required:!0,message:"镜像地址必填",trigger:"change"}]},s={persion_input_model_src:[{required:!0,message:"模型地址必填",trigger:"change"}],model_type:[{required:!0,message:"模型类型必选",trigger:"change"}]},i={container_id:[{required:!0,message:"应用容器必选",trigger:"change"}],host_model_id:[{required:!0,message:"模型不能为空",trigger:"change"}]},l={persion_input_model_src:[{required:!0,message:"数据集地址必填",trigger:"change"}],model_type:[{required:!0,message:"数据集类型必选",trigger:"change"}]},u={container_id:[{required:!0,message:"应用容器必选",trigger:"change"}],host_model_id:[{required:!0,message:"数据集不能为空",trigger:"change"}]}},48123:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var o=n(66252),r=n(2262),a=n(81464),s={__name:"index",props:{text:{type:String,default:""}},setup(e){return(t,n)=>{const s=(0,o.up)("vab-icon");return(0,o.wg)(),(0,o.j4)(s,{icon:"file-copy-2-line",class:"cursor-pointer",onClick:n[0]||(n[0]=t=>(0,r.SU)(a.Z)(e.text))})}}};function i(e){e.__source="src/components/ClipboardButton/index.vue"}"function"===typeof i&&i(s);const l=s;var u=l},41029:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var o=n(73481),r=(n(3241),n(62029),n(20129)),a=(n(69840),n(15659)),s=(n(10444),n(10661)),i=(n(35095),n(47820)),l=(n(50986),n(61715),n(6589),n(57018)),u=(n(74367),n(66252)),c=n(2262),d=n(71726),m=n(85026),_=(n(44904),n(33407)),p=n(20681),f=n(95965);const g={class:"w-full flex flex-justify-center"};var w={__name:"download_model_dialog",setup(e,{expose:t}){const{startTimeoutTimer:n}=(0,f.Z)(),{startLoadProgress:w,startReloadList:h,stopTimer:y}=(0,p.Z)(),v=((0,u.f3)("$pub"),(0,u.f3)("$baseMessage")),b=(0,c.iH)(!1),k=(0,c.iH)({...m.$j}),Z=(0,c.iH)(),U=()=>({container_id:"",create_from_where:"extra_path",model_thread_id:"0",persion_input_model_src:"",model_type:""}),S=(0,c.iH)({...U()});function W(e){b.value=!0,S.value.container_id=e,x(),j(e)}function C(){S.value={...U()},b.value=!1,T.value=[],Z.value.resetFields(),y()}function q(){n((()=>{j(S.value.container_id)}))}const I=(0,c.iH)([]);async function x(){const{body:e}=await(0,d.oh)();I.value=e}const T=(0,c.iH)([]);async function j(e){const{body:t}=await(0,d.C0)(e);T.value=t,w(t,"model_id","model_operation_array",T,d.e$,(()=>{j(e)})),h(t,"model_id","model_operation_array",T,(()=>(0,d.C0)(e)))}async function H(){await Z.value.validate((async(e,t)=>{if(!e)return!1;const n=await(0,d._S)(S.value);v(n.msg,"success","vab-hey-message-success");const o=S.value.container_id;Z.value.resetFields(),S.value.container_id=o}))}(0,c.iH)([]);return t({showDialog:W}),(e,t)=>{const n=l.EZ,d=r.nH,m=i.BT,p=i.km,f=(0,u.up)("vab-icon"),w=s.Q0,h=a.ElButton,y=r.ly,v=o.d0;return(0,u.wg)(),(0,u.j4)(v,{modelValue:(0,c.SU)(b),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,c.dq)(b)?b.value=e:null),title:"下载模型",width:"50%",onClose:C},{default:(0,u.w5)((()=>[(0,u.Wm)(y,{ref_key:"formRef",ref:Z,"label-width":"auto",model:(0,c.SU)(S),rules:(0,c.SU)(k)},{default:(0,u.w5)((()=>[(0,u.Wm)(d,{label:"模型地址",prop:"persion_input_model_src"},{default:(0,u.w5)((()=>[(0,u.Wm)(n,{modelValue:(0,c.SU)(S).persion_input_model_src,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,c.SU)(S).persion_input_model_src=e),placeholder:"模型地址(模型下载完成后，要点击“应用”才可以添加在容器里面)"},null,8,["modelValue"])])),_:1}),(0,u.Wm)(d,{label:"模型分类",prop:"model_type"},{default:(0,u.w5)((()=>[(0,u.Wm)(p,{modelValue:(0,c.SU)(S).model_type,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,c.SU)(S).model_type=e),filterable:"",placeholder:"选择模型保存到的分类",class:"contianer-name-helf"},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,c.SU)(I),(e=>((0,u.wg)(),(0,u.j4)(m,{key:e.type_key,label:e.name,value:e.type_key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,u.Wm)(w,{effect:"dark",content:"外部下载的模型，请选择模型的分类，不选择时默认保存在模型的other路径下",placement:"top",class:"mx-1","raw-content":""},{default:(0,u.w5)((()=>[(0,u.Wm)(f,{icon:"question-line",class:"cursor-pointer"})])),_:1})])),_:1}),(0,u.Wm)(d,null,{default:(0,u.w5)((()=>[(0,u._)("div",g,[(0,u.Wm)(h,{type:"primary",onClick:H},{default:(0,u.w5)((()=>[(0,u.Uk)(" 下载 ")])),_:1}),(0,u.Wm)(h,{onClick:C},{default:(0,u.w5)((()=>[(0,u.Uk)("取消")])),_:1})])])),_:1})])),_:1},8,["model","rules"]),(0,u.Wm)(_["default"],{list:(0,c.SU)(T),"container-id":(0,c.SU)(S).container_id,onReload:q},null,8,["list","container-id"])])),_:1},8,["modelValue"])}}};function h(e){e.__source="src/views/gpumarket/myhosts/components/download_model_dialog.vue"}var y=n(83744);"function"===typeof h&&h(w);const v=(0,y.Z)(w,[["__scopeId","data-v-289a0f4e"]]);var b=v},33407:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var o=n(3837),r=(n(3241),n(81010),n(50591)),a=(n(89035),n(15659)),s=(n(10444),n(32018)),i=(n(46160),n(10661)),l=(n(35095),n(50363),n(66252)),u=n(2262),c=n(3577),d=n(48123),m=n(96486),_=n(71726);const p=e=>((0,l.dD)("data-v-8453774e"),e=e(),(0,l.Cn)(),e),f={class:"el-progress-action"},g=p((()=>(0,l._)("div",null," 没发现本机有容器，请到容器市场上收藏心仪的容器，然后就能在这里下载，并应用了 ",-1)));var w={__name:"model_list",props:{list:{type:Array,default:()=>[]},containerId:{type:[String,Number],default:0}},emits:["reload"],setup(e,{emit:t}){const n=e,p=(0,l.f3)("$baseMessage"),w=(0,l.Fl)((()=>n.list.map((e=>(e.format_model_file_name=(0,m.truncate)(e.model_file_name,{length:45,separator:"..."}),e)))));(0,u.iH)([]);async function h(e){if(!e)return void p("无法下载此模型","error","vab-hey-message-error");const o={container_id:n.containerId,create_from_where:"model_list",model_thread_id:e,persion_input_model_src:"",model_type:""},r=await(0,_._S)(o);p(r.msg,"success","vab-hey-message-success"),t("reload")}async function y(e){const o={container_id:n.containerId,host_model_id:e},r=await(0,_.LN)(o);p(r.msg,"success","vab-hey-message-success"),t("reload")}async function v(e){await(0,_.S1)(e),p("删除模型成功","success","vab-hey-message-success"),t("reload")}async function b(e){await(0,_.Pb)(e),p("取消收藏成功","success","vab-hey-message-success"),t("reload")}return(e,t)=>{const n=o.$Y,m=i.Q0,_=s.Xh,p=a.ElButton,k=r.i1,Z=o.eI;return(0,l.wg)(),(0,l.j4)(Z,{data:(0,u.SU)(w),class:"model-list"},{empty:(0,l.w5)((()=>[g])),default:(0,l.w5)((()=>[(0,l.Wm)(n,{label:"分类",prop:"model_type_str",sortable:""}),(0,l.Wm)(n,{label:"容器文件名",prop:"model_file_name"},{default:(0,l.w5)((({row:e})=>[(0,l.Wm)(m,{placement:"top",content:e.model_file_name},{default:(0,l.w5)((()=>[(0,l.Uk)((0,c.zw)(e.format_model_file_name),1)])),_:2},1032,["content"]),(0,l.Wm)((0,u.SU)(d["default"]),{text:e.model_file_name},null,8,["text"])])),_:1}),(0,l.Wm)(n,{label:"状态",prop:"model_status_str",sortable:""}),(0,l.Wm)(n,{label:"位置",prop:"model_where_str",sortable:""}),(0,l.Wm)(n,{label:"操作",prop:"truedata"},{default:(0,l.w5)((({row:e})=>[(0,l._)("div",f,[e.model_operation_array.showProcess?((0,l.wg)(),(0,l.j4)(_,{key:0,"text-inside":!0,"stroke-width":20,percentage:e.model_operation_array.progress_num,striped:"",size:"small"},null,8,["percentage"])):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[e.model_operation_array.showPullButtun?((0,l.wg)(),(0,l.j4)(p,{key:0,type:"primary",size:"small",onClick:t=>h(e.model_forum_id)},{default:(0,l.w5)((()=>[(0,l.Uk)(" 下载 ")])),_:2},1032,["onClick"])):(0,l.kq)("",!0),e.model_operation_array.canApply?((0,l.wg)(),(0,l.j4)(p,{key:1,type:"primary",size:"small",onClick:t=>y(e.model_id)},{default:(0,l.w5)((()=>[(0,l.Uk)(" 应用 ")])),_:2},1032,["onClick"])):(0,l.kq)("",!0)],64)),e.model_operation_array.delete?((0,l.wg)(),(0,l.j4)(k,{key:2,title:"确定删除此模型吗？",onConfirm:t=>v(e.model_id)},{reference:(0,l.w5)((()=>[(0,l.Wm)(p,{type:"danger",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)("删除")])),_:1})])),_:2},1032,["onConfirm"])):(0,l.kq)("",!0),e.model_operation_array.delete_fav&&e.model_favid?((0,l.wg)(),(0,l.j4)(k,{key:3,title:"确定取消收藏此镜像？",onConfirm:t=>b(e.model_favid)},{reference:(0,l.w5)((()=>[(0,l.Wm)(p,{type:"warning",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)("取消收藏")])),_:1})])),_:2},1032,["onConfirm"])):(0,l.kq)("",!0)])])),_:1})])),_:1},8,["data"])}}};function h(e){e.__source="src/views/gpumarket/myhosts/components/model_list.vue"}var y=n(83744);"function"===typeof h&&h(w);const v=(0,y.Z)(w,[["__scopeId","data-v-8453774e"]]);var b=v}}]);