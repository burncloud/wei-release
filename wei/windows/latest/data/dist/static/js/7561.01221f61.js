/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2024-01-22 15:00:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[7561,8123,288,689],{81464:function(e,t,a){a.d(t,{Z:function(){return c}});var n=a(81095),o=a(26593);function r(e){n.gp.$baseMessage(`拷贝${e}成功`,"success","vab-hey-message-success",!1)}function s(e){n.gp.$baseMessage(`拷贝${e}失败`,"error","vab-hey-message-success",!1)}function c(e){const{isSupported:t,copy:a}=(0,o.VPI)();t||(0,o.gIw)("clipboard-write"),a(e).then((()=>{r(e)})).catch((t=>{console.log(t),s(e)}))}},20681:function(e,t,a){a.d(t,{Z:function(){return o}});var n=a(95965);function o(){const{startIntervalTimer:e,stopIntervalTimer:t}=(0,n.Z)();let a,o,r={};function s(n,o,s,c,i,l){const u=n.filter((e=>e[s].showProcess));r={},t(a),0!==u.length&&(a=e((async()=>{const e=u.map((e=>e[o])),{body:{list:t}}=await i(e);let a=!1;for(const n in t){const{stop:e,progress_num:i,progress_text:l}=t[n],u=c.value.find((e=>e[o]===n));u[s].progress_num||(u[s].progress_num=0);const _=parseInt(i);_>u[s].progress_num&&(u[s].progress_num=_,u[s].progress_text=l,r[n]={progress_num:_,progress_text:l}),e&&(a=!0)}a&&l()})))}function c(a,n,s,c,i){const l=a.filter((e=>e[s].time_flash_list));t(o),0!==l.length&&(o=e((async()=>{const{body:e}=await i();for(const t in r){const a=r[t],o=e.find((e=>e[n]===t));o&&Object.assign(o[s],a)}c.value=e;const a=e.filter((e=>e[s].time_flash_list));a.length<=0&&t(o)}),5e3))}function i(){t(a),t(o)}return{startLoadProgress:s,startReloadList:c,stopTimer:i}}},95965:function(e,t,a){a.d(t,{Z:function(){return r}});var n=a(23279),o=a.n(n);function r(){function e(e,t=3e3){return setInterval((()=>{e()}),t)}function t(e){e&&clearInterval(e)}function a(e,t=1e4){return setTimeout((()=>{e()}),t)}function n(e,t=3e3){o()((()=>{e()}),t)()}return{startIntervalTimer:e,stopIntervalTimer:t,startTimeoutTimer:a,startDebounce:n}}},48123:function(e,t,a){a.r(t),a.d(t,{default:function(){return l}});var n=a(66252),o=a(2262),r=a(81464),s={__name:"index",props:{text:{type:String,default:""}},setup(e){return(t,a)=>{const s=(0,n.up)("vab-icon");return(0,n.wg)(),(0,n.j4)(s,{icon:"file-copy-2-line",class:"cursor-pointer",onClick:a[0]||(a[0]=t=>(0,o.SU)(r.Z)(e.text))})}}};function c(e){e.__source="src/components/ClipboardButton/index.vue"}"function"===typeof c&&c(s);const i=s;var l=i},56562:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var n=a(49676),o=(a(3241),a(73204),a(3837)),r=(a(81010),a(76128)),s=(a(74828),a(50591)),c=(a(89035),a(15659)),i=(a(10444),a(32018)),l=(a(46160),a(10661)),u=(a(35095),a(50363),a(66252)),_=a(3577),p=a(2262),d=a(48123),m=a(16800),f=a(95965),g=a(23471);const w={m:"4"},y={m:"t-0 b-2"},v={m:"t-0 b-2"},k={m:"t-0 b-2"},h={class:"el-progress-action"};var b={__name:"docker_list",props:{tableData:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>{}},page:{type:Number,default:1}},emits:["change-page","reload"],setup(e,{emit:t}){const a=(0,u.f3)("$baseMessage"),{startTimeoutTimer:b}=(0,f.Z)();function U(e){t("change-page",e)}const W=(0,p.iH)();async function x(e){W.value.showDialog(e)}async function S(e,n){await(0,g.ET)(e,n),a("开启容器成功","success","vab-hey-message-success"),b((()=>{t("reload")}))}async function C(e,n){await(0,g.U$)(e,n),a("停止容器成功","success","vab-hey-message-success"),b((()=>{t("reload")}))}async function z(e,n){await(0,g.BX)(e,n),a("删除容器成功","success","vab-hey-message-success"),b((()=>{t("reload")}))}return(t,a)=>{const f=o.$Y,g=l.Q0,b=i.Xh,Z=c.ElButton,I=s.i1,T=r.GT,D=o.eI,j=n.R;return(0,u.wg)(),(0,u.iD)("div",null,[(0,u.Wm)(D,{fit:"",flexible:"",stripe:"","table-layout":"auto",data:e.tableData,"row-key":"ct_id",class:"data-list"},{empty:(0,u.w5)((()=>[(0,u.Wm)(T,{class:"vab-data-empty",description:"暂无容器，请到“算力市场”选择主机创建容器"})])),default:(0,u.w5)((()=>[(0,u.Wm)(f,{type:"expand",fixed:""},{default:(0,u.w5)((({row:e})=>[(0,u._)("div",w,[(0,u._)("p",y," GPU："+(0,_.zw)(e.ct_host_gpu_name)+" * "+(0,_.zw)(e.ct_gpu_count),1),(0,u._)("p",v,"CPU："+(0,_.zw)(e.ct_host_cpu_name)+" * 1",1),(0,u._)("p",k,"硬盘："+(0,_.zw)(e.ct_host_disk_type_str),1)])])),_:1}),(0,u.Wm)(f,{label:"主机UUID",prop:"ct_host_name",sortable:""},{default:(0,u.w5)((({row:e})=>[(0,u.Wm)(g,{effect:"dark",content:e.ct_host_name,placement:"top"},{default:(0,u.w5)((()=>[(0,u.Uk)((0,_.zw)(e.format_ct_host_name),1)])),_:2},1032,["content"]),(0,u.Wm)((0,p.SU)(d["default"]),{text:e.ct_host_name},null,8,["text"])])),_:1}),(0,u.Wm)(f,{label:"容器名称",prop:"ct_name"},{default:(0,u.w5)((({row:e})=>[(0,u.Uk)((0,_.zw)(e.ct_name)+" ",1),(0,u.Wm)((0,p.SU)(d["default"]),{text:e.ct_name},null,8,["text"])])),_:1}),(0,u.Wm)(f,{label:"基于镜像",prop:"ct_image_ci_name",sortable:""},{default:(0,u.w5)((({row:e})=>[(0,u.Wm)(g,{effect:"dark",content:e.ct_image_ci_name,placement:"top"},{default:(0,u.w5)((()=>[(0,u.Uk)((0,_.zw)(e.format_ct_image_ci_name),1)])),_:2},1032,["content"]),(0,u.Wm)((0,p.SU)(d["default"]),{text:e.ct_image_ci_name},null,8,["text"])])),_:1}),(0,u.Wm)(f,{label:"状态",prop:"ct_use_status_str"}),(0,u.Wm)(f,{label:"操作",prop:"truedata"},{default:(0,u.w5)((({row:e})=>[(0,u._)("div",h,[e.ct_operation_array.showProcess?((0,u.wg)(),(0,u.j4)(b,{key:0,"text-inside":!0,"stroke-width":20,percentage:e.ct_operation_array.progress_num,striped:"",size:"small"},null,8,["percentage"])):((0,u.wg)(),(0,u.iD)(u.HY,{key:1},[e.ct_operation_array.download_model?((0,u.wg)(),(0,u.j4)(Z,{key:0,type:"primary",size:"small",onClick:t=>x(e.ct_host_id)},{default:(0,u.w5)((()=>[(0,u.Uk)(" 下载模型 ")])),_:2},1032,["onClick"])):(0,u.kq)("",!0),e.ct_operation_array.download_dataset?((0,u.wg)(),(0,u.j4)(Z,{key:1,type:"primary",size:"small"},{default:(0,u.w5)((()=>[(0,u.Uk)(" 数据集 ")])),_:1})):(0,u.kq)("",!0),e.ct_operation_array.startContainer?((0,u.wg)(),(0,u.j4)(Z,{key:2,type:"primary",size:"small",onClick:t=>S(e.ct_host_id,e.ct_id)},{default:(0,u.w5)((()=>[(0,u.Uk)(" 开启 ")])),_:2},1032,["onClick"])):(0,u.kq)("",!0),e.ct_operation_array.stopContainer?((0,u.wg)(),(0,u.j4)(Z,{key:3,type:"warning",size:"small",onClick:t=>C(e.ct_host_id,e.ct_id)},{default:(0,u.w5)((()=>[(0,u.Uk)(" 停止 ")])),_:2},1032,["onClick"])):(0,u.kq)("",!0)],64)),e.ct_operation_array.delete?((0,u.wg)(),(0,u.j4)(I,{key:2,title:"确定删除此容器吗？",onConfirm:t=>z(e.ct_host_id,e.ct_id)},{reference:(0,u.w5)((()=>[(0,u.Wm)(Z,{type:"danger",size:"small"},{default:(0,u.w5)((()=>[(0,u.Uk)("删除")])),_:1})])),_:2},1032,["onConfirm"])):(0,u.kq)("",!0)])])),_:1})])),_:1},8,["data"]),(0,u.Wm)((0,p.SU)(m["default"]),{ref_key:"downloadModelDialogRef",ref:W},null,512),(0,u.Wm)(j,{"current-page":e.page,layout:"prev, pager, next","page-size":e.pagination.pageSize,total:e.pagination.total,onCurrentChange:U},null,8,["current-page","page-size","total"])])}}};function U(e){e.__source="src/views/gpumarket/myhosts/components/docker_list.vue"}var W=a(83744);"function"===typeof U&&U(b);const x=(0,W.Z)(b,[["__scopeId","data-v-7a2c4ac2"]]);var S=x},3638:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var n=a(4350),o=(a(3241),a(91103),a(73632)),r=(a(74965),a(22040)),s=(a(99426),a(27750)),c=a(7608),i=a(49927),l=a(20129),u=(a(69840),a(15659)),_=(a(10444),a(6589),a(57018)),p=(a(74367),a(47820)),d=(a(50986),a(61715),a(66252)),m=a(49963),f=a(2262),g=a(92325);function w(e,t){return(0,g.Z)({url:"/wwwapi.php?to=suanli_market&modac=container_list",method:"post",params:e,data:t})}var y=a(23471),v=a(56562),k=a(65781),h=a(48432),b=a(26010),U=a(20681);const W={class:"task-management-container"};var x={__name:"index",setup(e){const{startLoadProgress:t,stopTimer:a}=(0,U.Z)(),{queryForm:g,dataList:x,pagination:S,loadData:C}=(0,h.Z)(),z=(0,d.Fl)((()=>x.value.map((e=>(e.format_ct_host_name=(0,b.fM)(e.ct_host_name,4,"***",4),e.format_ct_image_ci_name=(0,b.fM)(e.ct_image_ci_name,4,"***",4),e))))),Z=(0,f.iH)({type:"uuid",keyword:""});async function I(){const e={[Z.value.type]:Z.value.keyword},{list:a}=await C((()=>w(g.value,e)));t(a,"ct_id","ct_operation_array",x,y.cu,I)}function T(e){g.value.page=e,I()}return(0,d.bv)((()=>{I()})),(0,d.Ah)((()=>{a()})),(e,t)=>{const a=p.BT,w=p.km,y=_.EZ,h=l.nH,b=u.ElButton,U=l.ly,x=i.Z,C=c.Z,D=s.Z,j=r.Dv,P=o.dq,q=n.t;return(0,d.wg)(),(0,d.iD)("div",W,[(0,d.Wm)(C,{class:"page-header"},{default:(0,d.w5)((()=>[(0,d.Wm)(x,null,{default:(0,d.w5)((()=>[(0,d.Wm)(U,{inline:"",onSubmit:t[2]||(t[2]=(0,m.iM)((()=>{}),["prevent"]))},{default:(0,d.w5)((()=>[(0,d.Wm)(h,null,{default:(0,d.w5)((()=>[(0,d.Wm)(y,{modelValue:(0,f.SU)(Z).keyword,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,f.SU)(Z).keyword=e),placeholder:"请输入内容",style:{width:"350px"}},{prepend:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:(0,f.SU)(Z).type,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,f.SU)(Z).type=e),placeholder:"请选择"},{default:(0,d.w5)((()=>[(0,d.Wm)(a,{label:"主机UUID",value:"uuid"}),(0,d.Wm)(a,{label:"容器名称",value:"container_name"})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),(0,d.Wm)(h,null,{default:(0,d.w5)((()=>[(0,d.Wm)(b,{icon:(0,f.SU)(k.Search),type:"primary",onClick:I},{default:(0,d.w5)((()=>[(0,d.Uk)(" 查询 ")])),_:1},8,["icon"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,d.Wm)(P,{gutter:20,span:"24"},{default:(0,d.w5)((()=>[(0,d.Wm)(j,{lg:24,md:24,sm:24,xl:24,xs:24},{default:(0,d.w5)((()=>[(0,d.Wm)(D,{shadow:"hover"},{default:(0,d.w5)((()=>[(0,d.wy)((0,d.Wm)((0,f.SU)(v["default"]),{page:(0,f.SU)(g).page,"table-data":(0,f.SU)(z),pagination:(0,f.SU)(S),onChangePage:T,onReload:I},null,8,["page","table-data","pagination"]),[[q,(0,f.SU)(S).isLoading]])])),_:1})])),_:1})])),_:1})])}}};function S(e){e.__source="src/views/gpumarket/myhosts/index.vue"}var C=a(83744);"function"===typeof S&&S(x);const z=(0,C.Z)(x,[["__scopeId","data-v-18d45170"]]);var Z=z}}]);