/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2024-01-12 10:25:31
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[5235,6700],{45986:function(e,a,t){t.d(a,{AX:function(){return s},KG:function(){return u},bh:function(){return i},m9:function(){return d},rK:function(){return r}});var l=t(96486),o=t(92325),n=t(11555);function u(e,a){const t=(0,l.pickBy)(e,(e=>""!==e));return(0,o.Z)({url:"/wwwapi.php?to=suanli_market_image&searchsort=1",method:"get",params:t,data:a})}async function r(e,a){return(0,n.Gv)().then((({body:{hash:t}})=>{const n={filter:"sortid",sortid:4,formhash:t,searchoption:{[a.inputId]:{value:a.keyword}},searchsortsubmit:""},u=(0,l.pickBy)(e,(e=>""!==e));return(0,o.Z)({url:"/wwwapi.php?to=suanli_market_image&searchsort=1",method:"post",params:u,data:n})}))}function i(e){return(0,o.Z)({url:"/wwwapi.php?to=postFavlist&thread_forum=suanli_image",method:"get",params:e})}function s(){return(0,o.Z)({url:"/wwwapi.php?to=suanli_market&modac=image_create_container_form",method:"get"})}function d(e){return(0,o.Z)({url:"/wwwapi.php?to=suanli_market&modac=image_create_download",method:"post",data:e})}},75846:function(e,a,t){t.r(a),t.d(a,{default:function(){return k}});var l=t(15659),o=(t(3241),t(10444),t(20129)),n=(t(69840),t(57018)),u=(t(74367),t(63715)),r=(t(76252),t(72319),t(6589),t(10661)),i=(t(35095),t(47820)),s=(t(50986),t(61715),t(66252)),d=t(2262),c=t(96486),m=t(86136),_=t(45986);const p={host_id:[{required:!0,message:"请选择设备",trigger:"change"}],container_name:[{required:!0,message:"容器名称必填",trigger:"change"}]},h={class:"comprehensive-form-container"};var f={__name:"create_dialog",setup(e,{expose:a}){const t=(0,d.iH)(!1),f=(0,d.iH)([]),w=(0,d.iH)(),g=()=>({host_id:"",image_thread_id:"",host_gpu_select:[],do_what:"create",container_name:""}),v=(0,d.iH)({...g()}),k=(0,d.iH)({...p});function U(e){t.value=!0,v.value={...g(),image_thread_id:e},y(),(0,s.Y3)((()=>{w.value.clearValidate()}))}function b(e){""===e[e.length-1]?(v.value.host_gpu_select=[""],v.value.do_what="onlypull"):(v.value.host_gpu_select=e.filter((e=>""!==e)),v.value.do_what="create")}async function y(){const{body:e}=await(0,_.AX)();f.value=e||[]}const S=(0,s.Fl)((()=>{const e=f.value.find((e=>e.host_id==v.value.host_id));return e?.host_gpu_digital_ids||[]}));async function V(){await w.value.validate((async(e,a)=>{if(!e)return!1;const l=(0,c.cloneDeep)(v.value);"onlypull"===l.do_what&&(l.host_gpu_select=[]);await(0,_.m9)(l);t.value=!1}))}return a({showDialog:U}),(e,a)=>{const c=i.BT,_=i.km,p=(0,s.up)("vab-icon"),g=r.Q0,U=o.nH,y=u.lm,W=u.z5,H=n.EZ,Z=o.ly,q=l.ElButton;return(0,s.wg)(),(0,s.iD)("div",h,[(0,s.Wm)((0,d.SU)(m["default"]),{modelValue:(0,d.SU)(t),"onUpdate:modelValue":a[4]||(a[4]=e=>(0,d.dq)(t)?t.value=e:null),title:"创建容器",width:"600px"},{footer:(0,s.w5)((()=>[(0,s.Wm)(q,{onClick:a[3]||(a[3]=e=>t.value=!1)},{default:(0,s.w5)((()=>[(0,s.Uk)("取 消")])),_:1}),(0,s.Wm)(q,{type:"primary",onClick:V},{default:(0,s.w5)((()=>[(0,s.Uk)(" 确 定 ")])),_:1})])),default:(0,s.w5)((()=>[(0,s.Wm)(Z,{ref_key:"formRef",ref:w,class:"demo-form",model:(0,d.SU)(v),rules:(0,d.SU)(k),"label-width":"auto"},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{label:"选择设备",prop:"host_id"},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{modelValue:(0,d.SU)(v).host_id,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,d.SU)(v).host_id=e),filterable:"",placeholder:"从“我的设备”里选择",class:"contianer-name"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,d.SU)(f),(e=>((0,s.wg)(),(0,s.j4)(c,{key:e.host_id,label:e.host_name||"未命名",value:e.host_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,s.Wm)(g,{effect:"dark",content:"从“我的设备”里选择非出租状态的设备<br>镜像将拉取到对应设备上<br>如需同时创建容器，请选择使用的显卡数量",placement:"top",class:"mx-1","raw-content":""},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{icon:"question-line",class:"cursor-pointer"})])),_:1})])),_:1}),(0,d.SU)(S).length>0?((0,s.wg)(),(0,s.j4)(U,{key:0,label:"GPU编号"},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{modelValue:(0,d.SU)(v).host_gpu_select,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,d.SU)(v).host_gpu_select=e),onChange:b},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,d.SU)(S),(e=>((0,s.wg)(),(0,s.j4)(y,{key:e.gpu_digital_id,label:e.gpu_digital_id},null,8,["label"])))),128)),(0,s.Wm)(y,{label:""},{default:(0,s.w5)((()=>[(0,s.Uk)("仅拉取，不创建容器")])),_:1})])),_:1},8,["modelValue"])])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(U,{label:"容器名称",prop:"container_name"},{default:(0,s.w5)((()=>[(0,s.Wm)(H,{modelValue:(0,d.SU)(v).container_name,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,d.SU)(v).container_name=e),placeholder:"创建完成后好在“我的容器”中找它",class:"contianer-name"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}};function w(e){e.__source="src/views/gpumarket/images/components/create_dialog.vue"}var g=t(83744);"function"===typeof w&&w(f);const v=(0,g.Z)(f,[["__scopeId","data-v-e66fc2f2"]]);var k=v}}]);