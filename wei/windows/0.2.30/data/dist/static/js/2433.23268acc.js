/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-11-06 12:25:27
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[2433,3495],{74987:function(t,e,a){a.d(e,{_U:function(){return s},lc:function(){return i},qm:function(){return o},r7:function(){return r}});var n=a(13517);function s(t){return(0,n.Z)({url:"/wwwapi.php?to=user&mod=space&do=pm",method:"get",params:t})}function r(t){return(0,n.Z)({url:"/wwwapi.php?to=user&do=notice",method:"get",params:t})}function i(t){return(0,n.Z)({url:"/wwwapi.php?to=usercp&ac=common&op=ignore&handlekey=noticeignore",method:"post",data:{authorid:t,type:"system"}})}function o(t){return(0,n.Z)({url:"/wwwapi.php?to=announcement",method:"get",params:t})}},61653:function(t,e,a){a.d(e,{E:function(){return o},p:function(){return l}});var n=a(27484),s=a.n(n),r=(a(33852),a(84110)),i=a.n(r);function o(t){return s().locale("zh-cn"),s()(t).fromNow()}function l(t,e="YYYY-MM-DD HH:mm:ss"){return s()(t).format(e)}s().extend(i())},53495:function(t,e,a){a.r(e),a.d(e,{default:function(){return b}});var n=a(35756),s=(a(3241),a(19414),a(66252)),r=a(2262),i=a(20235);const o=t=>((0,s.dD)("data-v-1f34b258"),t=t(),(0,s.Cn)(),t),l={class:"list-item"},u={class:"list-item-meta"},c={key:0,class:"list-item-meta-avatar"},p={key:1,class:"list-item-meta-avatar"},d=o((()=>(0,s._)("div",{class:"system-avatar"},"系统",-1))),m={class:"list-item-meta-content"},f={class:"list-item-meta-title"},g={class:"list-item-meta-description"},v={class:"list-item-meta-bottom"},w={class:"list-item-meta-operate"};var _={__name:"index",props:{user:{type:Object,default:()=>{}},avatarKey:{type:String,default:""},userIdKey:{type:[String,Number],default:""}},setup(t){const e=t,a=(0,s.Fl)((()=>e.user[e.avatarKey])),o=(0,s.Fl)((()=>parseInt(e.user[e.userIdKey]))),_=(0,s.Fl)((()=>(0,i.gx)(o.value)));return(t,e)=>{const i=n.F8,y=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",u,[(0,r.SU)(o)>0?((0,s.wg)(),(0,s.iD)("div",c,[(0,s.Wm)(y,{to:(0,r.SU)(_)},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{src:(0,r.SU)(a),class:"el-avatar el-avatar--big el-avatar--circle"},null,8,["src"])])),_:1},8,["to"])])):((0,s.wg)(),(0,s.iD)("div",p,[(0,s.Wm)(i,{class:"el-avatar el-avatar--big el-avatar--circle"},{error:(0,s.w5)((()=>[d])),_:1})])),(0,s._)("div",m,[(0,s._)("div",f,[(0,s.WI)(t.$slots,"title")]),(0,s._)("div",g,[(0,s.WI)(t.$slots,"description")]),(0,s._)("div",v,[(0,s.WI)(t.$slots,"bottom")])]),(0,s._)("div",w,[(0,s.WI)(t.$slots,"action")])])])}}};function y(t){t.__source="src/components/UserRow/index.vue"}var h=a(83744);"function"===typeof y&&y(_);const k=(0,h.Z)(_,[["__scopeId","data-v-1f34b258"]]);var b=k},22433:function(t,e,a){a.r(e),a.d(e,{default:function(){return b}});var n=a(4350),s=(a(3241),a(91103),a(73632)),r=(a(74965),a(49676)),i=(a(73204),a(15659)),o=(a(10444),a(22040)),l=(a(99426),a(76128)),u=(a(74828),a(66252)),c=a(3577);const p={class:"list-container"},d=["innerHTML"];function m(t,e,a,m,f,g){const v=l.GT,w=o.Dv,_=(0,u.up)("router-link"),y=i.ElButton,h=(0,u.up)("UserRow"),k=r.R,b=s.dq,W=n.t;return(0,u.wg)(),(0,u.iD)("div",p,[(0,u.Wm)(b,{gutter:20},{default:(0,u.w5)((()=>[t.emptyShow?((0,u.wg)(),(0,u.j4)(w,{key:0,span:24},{default:(0,u.w5)((()=>[(0,u.Wm)(v,{class:"vab-data-empty",description:"暂无数据"})])),_:1})):(0,u.kq)("",!0),(0,u.Wm)(w,{span:24},{default:(0,u.w5)((()=>[(0,u.wy)(((0,u.wg)(),(0,u.iD)("ul",null,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(t.dataList,(e=>((0,u.wg)(),(0,u.iD)("li",{key:e.id},[(0,u.Wm)(h,{user:e,"avatar-key":"avator","user-id-key":"authorid"},{title:(0,u.w5)((()=>[(0,u.Uk)((0,c.zw)(e.diff_date),1)])),description:(0,u.w5)((()=>[(0,u._)("div",null,[(0,u._)("span",{innerHTML:e.note},null,8,d),(0,u.Wm)(_,{to:e.to},{default:(0,u.w5)((()=>[(0,u.Uk)("查看")])),_:2},1032,["to"])])])),action:(0,u.w5)((()=>[(0,u.Wm)(y,{plain:"",type:"danger",onClick:a=>t.handleNoticeIgnore(e.authorid)},{default:(0,u.w5)((()=>[(0,u.Uk)(" 屏蔽 ")])),_:2},1032,["onClick"])])),_:2},1032,["user"])])))),128))])),[[W,t.listLoading]])])),_:1}),(0,u.Wm)(w,{span:24},{default:(0,u.w5)((()=>[t.dataList.length>0?((0,u.wg)(),(0,u.j4)(k,{key:0,"current-page":t.page,"onUpdate:currentPage":e[0]||(e[0]=e=>t.page=e),"page-size":t.pageSize,total:t.total,layout:"prev, pager, next",onCurrentChange:t.fetchData},null,8,["current-page","page-size","total","onCurrentChange"])):(0,u.kq)("",!0)])),_:1})])),_:1})])}var f=a(74987),g=a(53495),v=a(61653),w=a(2262),_=(0,u.aZ)({name:"List",components:{UserRow:g["default"]},setup(){const t=(0,u.f3)("$baseMessage"),e=(0,u.f3)("$baseConfirm"),a=(0,w.qj)({list:[],page:1,pageSize:1,total:1,listLoading:!0,emptyShow:!0});a.dataList=(0,u.Fl)((()=>a.list.map((t=>(t.diff_date=(0,v.E)(1e3*t.dateline),t)))));const n=async()=>{a.listLoading=!0;const t={page:a.page},{body:{list:e,page_perpage:n,page_allcount:s}}=await(0,f.r7)(t);a.list=e,a.pageSize=parseInt(n),a.total=parseInt(s),a.listLoading=!1,a.emptyShow=!1};async function s(a){e("你确定要屏蔽当前用户的消息提醒吗？",null,(async()=>{try{await(0,f.lc)(a),t("已经屏蔽，以后的相关信息将不在出现。","success","vab-hey-message-success")}catch(e){}}))}return(0,u.bv)((()=>{n()})),{...(0,w.BK)(a),fetchData:n,handleNoticeIgnore:s}}});function y(t){t.__source="src/views/setting/message/components/noticeList.vue"}var h=a(83744);"function"===typeof y&&y(_);const k=(0,h.Z)(_,[["render",m],["__scopeId","data-v-6c620fb0"]]);var b=k}}]);