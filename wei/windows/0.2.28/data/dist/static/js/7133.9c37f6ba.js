/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-10-21 18:47:55
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[7133,6632],{36632:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var l=a(10661),o=(a(3241),a(35095),a(14181)),n=(a(33828),a(66252)),s=a(2262),i=a(49963),c={__name:"index",props:{text:{type:String,default:""},tipText:{type:String,default:"拷贝生成信息"}},setup(e){const t=e,a=(0,s.qj)({tooltipText:t.tipText,tooltipStatus:!1});async function c(){try{await navigator.clipboard.writeText(t.text),a.tooltipText="已复制！"}catch(e){a.tooltipText="复制失败"}}function u(){a.tooltipStatus=!0,a.tooltipText=t.tipText,setTimeout((()=>{a.tooltipStatus=!1}),200)}return(e,t)=>{const d=(0,n.up)("DocumentCopy"),m=o.gn,r=l.Q0;return(0,n.wg)(),(0,n.j4)(r,{class:"box-item",effect:"dark",content:(0,s.SU)(a).tooltipText,disabled:(0,s.SU)(a).tooltipStatus,placement:"top"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{style:{color:"var(--el-color-success)"},class:"cursor-pointer",onClick:(0,i.iM)(c,["stop"]),onMouseleave:(0,i.iM)(u,["stop"])},{default:(0,n.w5)((()=>[(0,n.Wm)(d)])),_:1},8,["onClick","onMouseleave"])])),_:1},8,["content","disabled"])}}};function u(e){e.__source="src/components/ClipboardTips/index.vue"}"function"===typeof u&&u(c);const d=c;var m=d},66480:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var l=a(16273),o=a(35756),n=(a(3241),a(19414),a(63715)),s=(a(5508),a(91194)),i=(a(2993),a(32590),a(10661)),c=(a(35095),a(14181)),u=(a(33828),a(57658),a(66252)),d=a(2262),m=a(65781),r=a(94995),f=a(91222),p=a(17052),g=a(33729),w=a.n(g),_=a(22201);const v=e=>((0,u.dD)("data-v-48309368"),e=e(),(0,u.Cn)(),e),k={class:"taskqueue-tag-group"},y={class:"taskqueue-folow"},W={class:"taskqueue-image-group"},b={class:"taskqueue-image"},x={class:"image-slot"},h=v((()=>(0,u._)("div",null,"加载中",-1)));var S={__name:"index",props:{imageItem:{type:Object,default:()=>{}},images:{type:Array,default:()=>[]},imageIndex:{type:Number,default:0},redirect:{type:Boolean,default:!1}},emits:["topic"],setup(e,{emit:t}){const a=e,g=(0,_.tv)();let v=!1;const S=(0,u.Fl)((()=>a.imageItem)),I=(0,f.m)(),{getImageDetailResetParams:U,setFormType:D,setUploadImage:C,hdSetUploadImage:T,adSetUploadImage:M}=I;function q(){a.redirect&&g.push("/sd/create")}async function j(e){q(),U(e.picid),D("basic"),(0,p.D8)()}async function z(e){q(),C([{...e}]),D("basic"),(0,p.D8)()}async function F(e){q(),T(e),D("hdrepaire"),(0,p.D8)()}async function P(e){q(),M(e),D("adetailer"),(0,p.D8)()}function V(e){t("topic",e)}function E(e){e.replace(/(.*\/)*([^.]+\.\w+).*/gi,"$2");w()(e)}function Q(e){v||(v=!0,setTimeout((()=>{S.value.bigimg+=`&${Date.now()}`}),6e3))}return(t,a)=>{const f=(0,u.up)("PictureRounded"),p=c.gn,g=i.Q0,w=(0,u.up)("Picture"),_=(0,u.up)("Edit"),v=(0,u.up)("EditPen"),I=s.QQ,U=s.Lf,D=(0,u.up)("Share"),C=(0,u.up)("Download"),T=n.ElCheckbox,M=o.F8,q=l.Z;return(0,u.wg)(),(0,u.j4)(q,{"body-style":{padding:"0px"},shadow:"hover",class:"taskqueue-card-body"},{default:(0,u.w5)((()=>[(0,u.Wm)((0,d.SU)(r["default"]),{show:e.imageItem.checked},{mask:(0,u.w5)((()=>[(0,u._)("div",k,[(0,u.Wm)(U,{style:{width:"100%"}},{default:(0,u.w5)((()=>[(0,u.Wm)(I,null,{default:(0,u.w5)((()=>[(0,u.Wm)(g,{class:"box-item",effect:"dark",content:"重绘",placement:"top"},{default:(0,u.w5)((()=>[(0,u.Wm)(p,{onClick:a[0]||(a[0]=t=>j(e.imageItem))},{default:(0,u.w5)((()=>[(0,u.Wm)(f)])),_:1})])),_:1}),(0,u.Wm)(g,{class:"box-item",effect:"dark",content:"图生图",placement:"top"},{default:(0,u.w5)((()=>[(0,u.Wm)(p,{onClick:a[1]||(a[1]=t=>z(e.imageItem))},{default:(0,u.w5)((()=>[(0,u.Wm)(w)])),_:1})])),_:1}),(0,u.Wm)(g,{class:"box-item",effect:"dark",content:"高清修复",placement:"top"},{default:(0,u.w5)((()=>[(0,u.Wm)(p,{onClick:a[2]||(a[2]=t=>F(e.imageItem))},{default:(0,u.w5)((()=>[(0,u.Wm)(_)])),_:1})])),_:1}),(0,u.Wm)(g,{class:"box-item",effect:"dark",content:"脸部修复",placement:"top"},{default:(0,u.w5)((()=>[(0,u.Wm)(p,{onClick:a[3]||(a[3]=t=>P(e.imageItem))},{default:(0,u.w5)((()=>[(0,u.Wm)(v)])),_:1})])),_:1})])),_:1})])),_:1})]),(0,u._)("div",y,[(0,u.Wm)(U,{style:{width:"100%"}},{default:(0,u.w5)((()=>[(0,u.Wm)(I,null,{default:(0,u.w5)((()=>[(0,u.Wm)(g,{class:"box-item",effect:"dark",content:"分享",placement:"top"},{default:(0,u.w5)((()=>[(0,u.Wm)(p,{onClick:a[4]||(a[4]=t=>V(e.imageItem.bigimg))},{default:(0,u.w5)((()=>[(0,u.Wm)(D)])),_:1})])),_:1}),(0,u.Wm)(g,{class:"box-item",effect:"dark",content:"下载",placement:"top"},{default:(0,u.w5)((()=>[(0,u.Wm)(p,{onClick:a[5]||(a[5]=t=>E(e.imageItem.bigimg))},{default:(0,u.w5)((()=>[(0,u.Wm)(C)])),_:1})])),_:1}),(0,u.Wm)(g,{class:"box-item",effect:"dark",content:"选中批量下载和分享",placement:"top"},{default:(0,u.w5)((()=>[(0,u.Wm)(T,{modelValue:(0,d.SU)(S).checked,"onUpdate:modelValue":a[6]||(a[6]=e=>(0,d.SU)(S).checked=e),label:"",size:"large"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])])),default:(0,u.w5)((()=>[(0,u._)("div",W,[(0,u._)("div",b,[(0,u.Wm)(M,{src:e.imageItem.bigimg,"zoom-rate":1.1,"preview-src-list":e.images,"initial-index":e.imageIndex,"hide-on-click-modal":!0,fit:"contain",lazy:!0,onError:Q},{error:(0,u.w5)((()=>[(0,u._)("div",x,[(0,u._)("div",null,[h,(0,u.Wm)(p,{class:"icon"},{default:(0,u.w5)((()=>[(0,u.Wm)((0,d.SU)(m.Picture))])),_:1})])])])),_:1},8,["src","preview-src-list","initial-index"])])])])),_:1},8,["show"])])),_:1})}}};function I(e){e.__source="src/components/ImageItem/index.vue"}var U=a(83744);"function"===typeof I&&I(S);const D=(0,U.Z)(S,[["__scopeId","data-v-48309368"]]);var C=D},94995:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var l=a(66252),o=a(3577);const n={class:"image-box"};var s={__name:"index",props:{show:{type:Boolean,default:!1}},setup(e){return(t,a)=>((0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",{class:(0,o.C_)(["image-mask",{"image-show":e.show}])},[(0,l.WI)(t.$slots,"mask")],2),(0,l.WI)(t.$slots,"default")]))}};function i(e){e.__source="src/components/ImageMask/index.vue"}var c=a(83744);"function"===typeof i&&i(s);const u=(0,c.Z)(s,[["__scopeId","data-v-29cbe321"]]);var d=u},26280:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var l=a(4350),o=(a(3241),a(91103),a(31452)),n=(a(68445),a(66252)),s=a(3577),i=a(2262);const c={class:"wrap aligin-center"},u={key:0,class:"loading"},d={key:2};var m={__name:"index",props:{status:{type:String,default:"loadmore"}},emits:["loadmore"],setup(e,{emit:t}){const a=e,m=(0,n.Fl)((()=>{let e="";switch(a.status){case"loadmore":e="更多";break;case"loading":e="加载中";break;case"nomore":e="没有数据了";break}return e}));function r(){t("loadmore")}return(t,a)=>{const f=o.E2,p=l.t;return(0,n.wg)(),(0,n.iD)("div",c,["loading"==e.status?(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",u,null,512)),[[p,!0]]):(0,n.kq)("",!0),"loadmore"==e.status?((0,n.wg)(),(0,n.j4)(f,{key:1,type:"primary",onClick:r},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)((0,i.SU)(m)),1)])),_:1})):((0,n.wg)(),(0,n.iD)("span",d,(0,s.zw)((0,i.SU)(m)),1))])}}};function r(e){e.__source="src/components/LoadMore/index.vue"}var f=a(83744);"function"===typeof r&&r(m);const p=(0,f.Z)(m,[["__scopeId","data-v-300dc6ea"]]);var g=p},97133:function(e,t,a){a.r(t),a.d(t,{default:function(){return R}});var l=a(65450),o=(a(3241),a(69998),a(16273)),n=a(32018),s=(a(46160),a(73632)),i=(a(74965),a(22040)),c=(a(99426),a(83396)),u=(a(48157),a(74741),a(91194)),d=(a(2993),a(15659)),m=(a(79987),a(10444),a(14181)),r=(a(33828),a(10661)),f=(a(35095),a(85381)),p=(a(68538),a(32590),a(66252)),g=a(2262),w=a(3577),_=a(49963),v=a(36632),k=a(66480),y=a(26280),W=a(21639),b=a(40645),x=a(91222),h=a(95244),S=(a(17052),a(33729)),I=a.n(S),U=a(47720);const D={class:"taskqueue-container"},C=["infinite-scroll-disabled"],T={style:{"margin-left":"8px"}},M={class:"taskqueue-card-body"},q={class:"taskqueue-image-group"},j={class:"taskqueue-image",justify:"center"},z={class:"percentage-value"},F={class:"percentage-label"};var P={__name:"taskqueue",setup(e){const t=(0,p.f3)("$baseConfirm"),a=(0,p.f3)("$baseMessage"),S=(0,b.sP)(),P=(0,x.m)(),{getTasks:V,getTasksCheckedImages:E,hasNoMoreData:Q,getProcessingTasks:R}=(0,U.Jk)(S),{setFormType:Z,setUploadImage:$,hdSetUploadImage:B,adSetUploadImage:L,setFormData:Y,getImageDetailResetParams:H}=P,K=(0,g.qj)({accordion:!1,shareFormRef:null,loadMoreStatus:"loading"}),{accordion:O,shareFormRef:A,loadMoreStatus:N}=(0,g.BK)(K),X=e=>{const t=e?["1"]:[];V.value.map((e=>e.collapse=t))},J=(0,p.Fl)((()=>"loading"===N.value||"nomore"===N.value));let G;async function ee(){Q.value||(K.loadMoreStatus="loading",await S.loadMore(),(0,p.Y3)((()=>{K.loadMoreStatus=Q.value?"nomore":"loadmore"})))}async function te(e){t("你确定要删除当前任务吗",null,(async()=>{const{msg:t}=await(0,h._5)(e.ms_id);a(t,"success","vab-hey-message-success"),S.loadData()}))}function ae(){E.value.forEach((e=>{I()(e.bigimg)})),S.resetImagesCheck()}async function le(){const e=E.value.map((e=>e.bigimg));A.value.showDialog(e)}async function oe(e){A.value.showDialog([e])}return(0,p.bv)((async()=>{K.loadMoreStatus="loading",await S.loadData(),(0,p.Y3)((()=>{K.loadMoreStatus=Q.value?"nomore":"loadmore"})),G=setInterval((()=>{S.loadTasksProcess()}),3e3)})),(0,p.Ah)((()=>{G&&clearInterval(G)})),(e,t)=>{const a=u.QQ,b=f.OX,x=r.Q0,h=(0,p.up)("Download"),S=m.gn,I=d.ElButton,U=(0,p.up)("Share"),P=d.MO,Q=u.Lf,R=(0,p.up)("Delete"),Z=c.aE,$=c.PH,B=i.Dv,L=s.dq,Y=n.Xh,H=o.Z,K=l.n;return(0,p.wg)(),(0,p.iD)("div",D,[(0,p.Wm)(Q,{class:"margin-top",column:2},{default:(0,p.w5)((()=>[(0,p.Wm)(a,{label:"任务队列"}),(0,p.Wm)(a,{label:"","label-align":"right",align:"right"},{default:(0,p.w5)((()=>[(0,p.Wm)(x,{class:"box-item",effect:"dark",content:"折叠图片生成信息",placement:"top"},{default:(0,p.w5)((()=>[(0,p.Wm)(b,{modelValue:(0,g.SU)(O),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,g.dq)(O)?O.value=e:null),"inline-prompt":"",style:{"--el-switch-on-color":"var(--el-color-primary)","--el-switch-off-color":"var(--el-color-grey)"},"active-text":"显示","inactive-text":"隐藏",onChange:X},null,8,["modelValue"])])),_:1}),(0,p.Wm)(P,{class:"ml-4"},{default:(0,p.w5)((()=>[(0,p.Wm)(x,{class:"box-item",effect:"dark",content:"在任务列表中选择图片后点击此按钮可批量下载",placement:"top"},{default:(0,p.w5)((()=>[(0,p.Wm)(I,{type:"default",text:"",disabled:0===(0,g.SU)(E).length,onClick:ae},{default:(0,p.w5)((()=>[(0,p.Wm)(S,null,{default:(0,p.w5)((()=>[(0,p.Wm)(h)])),_:1}),(0,p.Uk)(" 下载 ")])),_:1},8,["disabled"])])),_:1}),(0,p.Wm)(x,{class:"box-item",effect:"dark",content:"在任务列表中选择图片后点击此按钮可把选择的图片发帖，分享出去",placement:"top"},{default:(0,p.w5)((()=>[(0,p.Wm)(I,{text:"",disabled:0===(0,g.SU)(E).length,onClick:le},{default:(0,p.w5)((()=>[(0,p.Wm)(S,null,{default:(0,p.w5)((()=>[(0,p.Wm)(U)])),_:1}),(0,p.Uk)(" 分享 ")])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,p.wy)(((0,p.wg)(),(0,p.iD)("div",{"infinite-scroll-disabled":(0,g.SU)(J),class:"scrollbar"},[((0,p.wg)(!0),(0,p.iD)(p.HY,null,(0,p.Ko)((0,g.SU)(V),(e=>((0,p.wg)(),(0,p.iD)("div",{key:e.ms_id},[(0,p.Wm)($,{modelValue:e.collapse,"onUpdate:modelValue":t=>e.collapse=t},{default:(0,p.w5)((()=>[(0,p.Wm)(Z,{name:"1"},{title:(0,p.w5)((()=>[(0,p.Uk)((0,w.zw)(e.created_at)+" ",1),(0,p._)("i",T,(0,w.zw)(e.expired_at),1),(0,p.Wm)((0,g.SU)(v["default"]),{text:e.log},null,8,["text"]),(0,p.Wm)(x,{class:"box-item",effect:"dark",content:"删除任务",placement:"top"},{default:(0,p.w5)((()=>[(0,p.Wm)(S,{style:{color:"var(--el-color-danger)"},onClick:(0,_.iM)((t=>te(e)),["stop"])},{default:(0,p.w5)((()=>[(0,p.Wm)(R)])),_:2},1032,["onClick"])])),_:2},1024)])),default:(0,p.w5)((()=>[(0,p._)("div",null,(0,w.zw)(e.log),1)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"]),e.ms_state>=100?((0,p.wg)(),(0,p.j4)(L,{key:0,gutter:16,span:"24",justify:"start"},{default:(0,p.w5)((()=>[((0,p.wg)(!0),(0,p.iD)(p.HY,null,(0,p.Ko)(e.imagelist,((t,a)=>((0,p.wg)(),(0,p.j4)(B,{key:t.picid,xs:24,sm:12,md:6,lg:6,xl:4},{default:(0,p.w5)((()=>[(0,p.Wm)((0,g.SU)(k["default"]),{"image-item":t,images:e.images,"image-index":a,onTopic:oe},null,8,["image-item","images","image-index"])])),_:2},1024)))),128))])),_:2},1024)):((0,p.wg)(),(0,p.j4)(L,{key:1,gutter:16},{default:(0,p.w5)((()=>[(0,p.Wm)(B,{xs:24,sm:12,md:6,lg:6,xl:4},{default:(0,p.w5)((()=>[(0,p.Wm)(H,{"body-style":{padding:"0px"},shadow:"hover"},{default:(0,p.w5)((()=>[(0,p._)("div",M,[(0,p._)("div",q,[(0,p._)("div",j,[(0,p.Wm)(Y,{type:"dashboard",percentage:e.percentage},{default:(0,p.w5)((({percentage:t})=>[(0,p._)("span",z,(0,w.zw)(t)+"%",1),(0,p._)("span",F,(0,w.zw)(e.ms_state_msg),1)])),_:2},1032,["percentage"])])])])])),_:2},1024)])),_:2},1024)])),_:2},1024))])))),128)),(0,p.Wm)((0,g.SU)(y["default"]),{status:(0,g.SU)(N),onLoadmore:ee},null,8,["status"])],8,C)),[[K,ee]]),(0,p.Wm)((0,g.SU)(W["default"]),{ref_key:"shareFormRef",ref:A},null,512)])}}};function V(e){e.__source="src/views/stablediffusion/components/taskqueue.vue"}var E=a(83744);"function"===typeof V&&V(P);const Q=(0,E.Z)(P,[["__scopeId","data-v-99fedb0c"]]);var R=Q}}]);