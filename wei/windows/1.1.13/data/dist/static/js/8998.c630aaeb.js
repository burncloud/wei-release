/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2024-01-12 10:25:31
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[8998],{45986:function(e,t,a){a.d(t,{AX:function(){return u},KG:function(){return s},bh:function(){return i},m9:function(){return c},rK:function(){return r}});var l=a(96486),n=a(92325),o=a(11555);function s(e,t){const a=(0,l.pickBy)(e,(e=>""!==e));return(0,n.Z)({url:"/wwwapi.php?to=suanli_market_image&searchsort=1",method:"get",params:a,data:t})}async function r(e,t){return(0,o.Gv)().then((({body:{hash:a}})=>{const o={filter:"sortid",sortid:4,formhash:a,searchoption:{[t.inputId]:{value:t.keyword}},searchsortsubmit:""},s=(0,l.pickBy)(e,(e=>""!==e));return(0,n.Z)({url:"/wwwapi.php?to=suanli_market_image&searchsort=1",method:"post",params:s,data:o})}))}function i(e){return(0,n.Z)({url:"/wwwapi.php?to=postFavlist&thread_forum=suanli_image",method:"get",params:e})}function u(){return(0,n.Z)({url:"/wwwapi.php?to=suanli_market&modac=image_create_container_form",method:"get"})}function c(e){return(0,n.Z)({url:"/wwwapi.php?to=suanli_market&modac=image_create_download",method:"post",data:e})}},75846:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var l=a(15659),n=(a(3241),a(10444),a(20129)),o=(a(69840),a(57018)),s=(a(74367),a(63715)),r=(a(76252),a(72319),a(6589),a(10661)),i=(a(35095),a(47820)),u=(a(50986),a(61715),a(66252)),c=a(2262),d=a(96486),m=a(86136),p=a(45986);const _={host_id:[{required:!0,message:"请选择设备",trigger:"change"}],container_name:[{required:!0,message:"容器名称必填",trigger:"change"}]},f={class:"comprehensive-form-container"};var w={__name:"create_dialog",setup(e,{expose:t}){const a=(0,c.iH)(!1),w=(0,c.iH)([]),g=(0,c.iH)(),h=()=>({host_id:"",image_thread_id:"",host_gpu_select:[],do_what:"create",container_name:""}),v=(0,c.iH)({...h()}),k=(0,c.iH)({..._});function y(e){a.value=!0,v.value={...h(),image_thread_id:e},W(),(0,u.Y3)((()=>{g.value.clearValidate()}))}function b(e){""===e[e.length-1]?(v.value.host_gpu_select=[""],v.value.do_what="onlypull"):(v.value.host_gpu_select=e.filter((e=>""!==e)),v.value.do_what="create")}async function W(){const{body:e}=await(0,p.AX)();w.value=e||[]}const U=(0,u.Fl)((()=>{const e=w.value.find((e=>e.host_id==v.value.host_id));return e?.host_gpu_digital_ids||[]}));async function S(){await g.value.validate((async(e,t)=>{if(!e)return!1;const l=(0,d.cloneDeep)(v.value);"onlypull"===l.do_what&&(l.host_gpu_select=[]);await(0,p.m9)(l);a.value=!1}))}return t({showDialog:y}),(e,t)=>{const d=i.BT,p=i.km,_=(0,u.up)("vab-icon"),h=r.Q0,y=n.nH,W=s.lm,x=s.z5,z=o.EZ,V=n.ly,D=l.ElButton;return(0,u.wg)(),(0,u.iD)("div",f,[(0,u.Wm)((0,c.SU)(m["default"]),{modelValue:(0,c.SU)(a),"onUpdate:modelValue":t[4]||(t[4]=e=>(0,c.dq)(a)?a.value=e:null),title:"创建容器",width:"600px"},{footer:(0,u.w5)((()=>[(0,u.Wm)(D,{onClick:t[3]||(t[3]=e=>a.value=!1)},{default:(0,u.w5)((()=>[(0,u.Uk)("取 消")])),_:1}),(0,u.Wm)(D,{type:"primary",onClick:S},{default:(0,u.w5)((()=>[(0,u.Uk)(" 确 定 ")])),_:1})])),default:(0,u.w5)((()=>[(0,u.Wm)(V,{ref_key:"formRef",ref:g,class:"demo-form",model:(0,c.SU)(v),rules:(0,c.SU)(k),"label-width":"auto"},{default:(0,u.w5)((()=>[(0,u.Wm)(y,{label:"选择设备",prop:"host_id"},{default:(0,u.w5)((()=>[(0,u.Wm)(p,{modelValue:(0,c.SU)(v).host_id,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,c.SU)(v).host_id=e),filterable:"",placeholder:"从“我的设备”里选择",class:"contianer-name"},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,c.SU)(w),(e=>((0,u.wg)(),(0,u.j4)(d,{key:e.host_id,label:e.host_name||"未命名",value:e.host_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,u.Wm)(h,{effect:"dark",content:"从“我的设备”里选择非出租状态的设备<br>镜像将拉取到对应设备上<br>如需同时创建容器，请选择使用的显卡数量",placement:"top",class:"mx-1","raw-content":""},{default:(0,u.w5)((()=>[(0,u.Wm)(_,{icon:"question-line",class:"cursor-pointer"})])),_:1})])),_:1}),(0,c.SU)(U).length>0?((0,u.wg)(),(0,u.j4)(y,{key:0,label:"GPU编号"},{default:(0,u.w5)((()=>[(0,u.Wm)(x,{modelValue:(0,c.SU)(v).host_gpu_select,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,c.SU)(v).host_gpu_select=e),onChange:b},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,c.SU)(U),(e=>((0,u.wg)(),(0,u.j4)(W,{key:e.gpu_digital_id,label:e.gpu_digital_id},null,8,["label"])))),128)),(0,u.Wm)(W,{label:""},{default:(0,u.w5)((()=>[(0,u.Uk)("仅拉取，不创建容器")])),_:1})])),_:1},8,["modelValue"])])),_:1})):(0,u.kq)("",!0),(0,u.Wm)(y,{label:"容器名称",prop:"container_name"},{default:(0,u.w5)((()=>[(0,u.Wm)(z,{modelValue:(0,c.SU)(v).container_name,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,c.SU)(v).container_name=e),placeholder:"创建完成后好在“我的容器”中找它",class:"contianer-name"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}};function g(e){e.__source="src/views/gpumarket/images/components/create_dialog.vue"}var h=a(83744);"function"===typeof g&&g(w);const v=(0,h.Z)(w,[["__scopeId","data-v-e66fc2f2"]]);var k=v},88998:function(e,t,a){a.r(t),a.d(t,{default:function(){return H}});var l=a(27750),n=a(49676),o=(a(3241),a(73204),a(10661)),s=(a(35095),a(77669)),r=(a(95774),a(15659)),i=(a(10444),a(86398)),u=(a(69448),a(91194)),c=(a(2993),a(32590),a(66252)),d=a(3577),m=a(2262),p=a(75846);const _=e=>((0,c.dD)("data-v-743f0884"),e=e(),(0,c.Cn)(),e),f={class:"description-container"},w=_((()=>(0,c._)("div",{class:"text-center"},"暂没有数据",-1))),g={class:"icon-wrapper"},h={class:"icon-wrapper"},v={class:"text"},k={class:"icon-wrapper"},y={class:"text"},b={class:"icon-wrapper"},W={class:"text"},U={class:"icon-wrapper"},S={class:"text"},x={class:"icon-wrapper"},z={class:"text"};var V={__name:"host_table",props:{tableData:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>{}},page:{type:Number,default:1}},emits:["change-page"],setup(e,{emit:t}){const a=(0,m.iH)(null),_=e=>{a.value.showDialog(e)};function V(e){t("change-page",e)}return(t,D)=>{const Z=u.QQ,C=u.Lf,H=(0,c.up)("router-link"),j=i.gi,I=r.ElButton,B=s.vs,K=(0,c.up)("vab-icon"),q=o.Q0,R=n.R,$=l.Z;return(0,c.wg)(),(0,c.iD)("div",f,[(0,c.Wm)($,{shadow:"hover"},{default:(0,c.w5)((()=>[0===e.tableData.length?((0,c.wg)(),(0,c.j4)(C,{key:0},{default:(0,c.w5)((()=>[(0,c.Wm)(Z,null,{default:(0,c.w5)((()=>[w])),_:1})])),_:1})):((0,c.wg)(!0),(0,c.iD)(c.HY,{key:1},(0,c.Ko)(e.tableData,(e=>((0,c.wg)(),(0,c.j4)(C,{key:e.tid,column:1,size:"small",class:"custom-descriptions"},{title:(0,c.w5)((()=>[(0,c.Wm)(H,{to:`/gpumarket/image/${e.tid}`,class:"marginright"},{default:(0,c.w5)((()=>[(0,c.Uk)((0,d.zw)(e.subject),1)])),_:2},1032,["to"]),(0,c.Wm)(j,null,{default:(0,c.w5)((()=>[(0,c.Uk)((0,d.zw)(e.threadsortshow.optionlist.image_star.value),1)])),_:2},1024)])),extra:(0,c.w5)((()=>[(0,c.Wm)(I,{type:"primary",onClick:t=>_(e.tid)},{default:(0,c.w5)((()=>[(0,c.Uk)(" 创建容器 ")])),_:2},1032,["onClick"])])),default:(0,c.w5)((()=>[(0,c.Wm)(Z,null,{default:(0,c.w5)((()=>[(0,c._)("div",g,[(0,c.Wm)(H,{to:e.author_route},{default:(0,c.w5)((()=>[(0,c.Wm)(B,{size:"small",src:e.authoravatar,class:"marginright"},null,8,["src"]),(0,c.Wm)(j,{class:"marginright"},{default:(0,c.w5)((()=>[(0,c.Uk)((0,d.zw)(e.author),1)])),_:2},1024)])),_:2},1032,["to"]),(0,c.Wm)(j,{class:"marginright"},{default:(0,c.w5)((()=>[(0,c.Uk)("| "+(0,d.zw)(e.diff_date)+"更新",1)])),_:2},1024)])])),_:2},1024),(0,c.Wm)(Z,null,{default:(0,c.w5)((()=>[(0,c.Wm)(j,{class:"mx-1"},{default:(0,c.w5)((()=>[(0,c.Uk)((0,d.zw)(e.message),1)])),_:2},1024)])),_:2},1024),(0,c.Wm)(Z,null,{default:(0,c.w5)((()=>[(0,c._)("div",h,[(0,c.Wm)(q,{class:"box-item",effect:"dark",content:"收藏",placement:"top"},{default:(0,c.w5)((()=>[(0,c.Wm)(K,{icon:"star-line",class:"marginright"})])),_:1}),(0,c._)("span",v,(0,d.zw)(e.favtimes),1)]),(0,c._)("div",k,[(0,c.Wm)(q,{class:"box-item",effect:"dark",content:"下载",placement:"top"},{default:(0,c.w5)((()=>[(0,c.Wm)(K,{icon:"download-2-line",class:"marginright"})])),_:1}),(0,c._)("span",y,(0,d.zw)(e.threadsortshow.optionlist.image_download.value),1)]),(0,c._)("div",b,[(0,c.Wm)(q,{class:"box-item",effect:"dark",content:"使用",placement:"top"},{default:(0,c.w5)((()=>[(0,c.Wm)(K,{icon:"install-line",class:"marginright"})])),_:1}),(0,c._)("span",W,(0,d.zw)(e.threadsortshow.optionlist.image_use.value),1)]),(0,c._)("div",U,[(0,c.Wm)(q,{class:"box-item",effect:"dark",content:"评论",placement:"top"},{default:(0,c.w5)((()=>[(0,c.Wm)(K,{icon:"chat-poll-line",class:"marginright"})])),_:1}),(0,c._)("span",S,(0,d.zw)(e.comments),1)]),(0,c._)("div",x,[(0,c.Wm)(q,{class:"box-item",effect:"dark",content:"大小",placement:"top"},{default:(0,c.w5)((()=>[(0,c.Wm)(K,{icon:"database-2-line",class:"marginright"})])),_:1}),(0,c._)("span",z,(0,d.zw)(e.threadsortshow.optionlist.image_size.value),1)])])),_:2},1024)])),_:2},1024)))),128)),(0,c.Wm)(R,{"current-page":e.page,layout:"prev, pager, next","page-size":e.pagination.pageSize,total:e.pagination.total,onCurrentChange:V},null,8,["current-page","page-size","total"])])),_:1}),(0,c.Wm)((0,m.SU)(p["default"]),{ref_key:"dialogRef",ref:a},null,512)])}}};function D(e){e.__source="src/views/gpumarket/images/components/host_table.vue"}var Z=a(83744);"function"===typeof D&&D(V);const C=(0,Z.Z)(V,[["__scopeId","data-v-743f0884"]]);var H=C},27750:function(e,t,a){a.d(t,{Z:function(){return p}});var l=a(30032),n=(a(3241),a(91154),a(97830)),o=(a(13768),a(66252)),s=a(2262),r=a(3577),i=a(22201),u=(0,o.aZ)({__name:"index",props:{header:{type:String,default:""},bodyStyle:{type:Object,default:()=>({})},shadow:{type:String,default:""},skeleton:{type:Boolean,default:!1},skeletonRows:{type:Number,default:4}},setup(e){let t=null;const a=(0,s.iH)(!0);return t=setTimeout((()=>{a.value=!1}),500),(0,i.iS)(((e,a,l)=>{clearInterval(t),l()})),(t,i)=>{const u=n.vk,c=l.Kf;return(0,o.wg)(),(0,o.j4)(c,{"body-style":e.bodyStyle,class:"vab-card",shadow:e.shadow},(0,o.Nv)({default:(0,o.w5)((()=>[e.skeleton?((0,o.wg)(),(0,o.j4)(u,{key:0,animated:"",loading:(0,s.SU)(a),rows:e.skeletonRows},{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"default",{class:"vab-card-transition"})])),_:3},8,["loading","rows"])):(0,o.WI)(t.$slots,"default",{key:1,class:"vab-card-transition"})])),_:2},[t.$slots.header||e.header?{name:"header",fn:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"header",{},(()=>[(0,o.Uk)((0,r.zw)(e.header),1)]))])),key:"0"}:void 0]),1032,["body-style","shadow"])}}});function c(e){e.__source="library/components/VabCard/index.vue"}var d=a(83744);"function"===typeof c&&c(u);const m=(0,d.Z)(u,[["__scopeId","data-v-391150ea"]]);var p=m}}]);